<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DISC Persönlichkeitstest</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600;700&display=swap');

        body {
            font-family: 'Open Sans', sans-serif;
            margin: 0;
            padding: 20px;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(to right, #ece9e6, #ffffff); /* Heller, weicher Farbverlauf */
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }
        h1 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 30px; /* Abstand nach dem Titel */
            font-size: 2.5em;
            font-weight: 700;
        }
        /* Dieses Bild ist NICHT in der introduction-box, falls es am ganz oberen Rand des Bodys sein sollte */
        .disc-model-image {
            max-width: 100%;
            height: auto;
            display: block;
            margin: 20px auto 40px auto;
            border-radius: 8px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }

        /* Hauptcontainer für den Test */
        #test-container {
            background-color: #ffffff;
            padding: 40px;
            border-radius: 10px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            max-width: 800px;
            width: 100%;
            box-sizing: border-box;
            margin-bottom: 20px;
        }

        /* Intro Section */
        #intro-section {
            text-align: center;
        }
        #intro-section p {
            font-size: 1.1em;
            margin-bottom: 25px;
        }
        #start-test-button {
            background-color: #007bff;
            color: white;
            padding: 12px 25px;
            border: none;
            border-radius: 5px;
            font-size: 1.1em;
            cursor: pointer;
            transition: background-color 0.3s ease;
            margin-top: 20px;
        }
        #start-test-button:hover {
            background-color: #0056b3;
        }

        /* Quiz Section */
        #quiz-section {
            display: none; /* Wird per JS eingeblendet */
        }
        .question-block {
            background-color: #e9f5ff;
            border: 1px solid #cce5ff;
            border-radius: 8px;
            padding: 25px;
            margin-bottom: 30px;
            text-align: left;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
        }
        .question-block p {
            font-weight: 600;
            font-size: 1.1em;
            margin-bottom: 20px;
            color: #0056b3;
        }

        .options-group label {
            display: block;
            background-color: #ffffff;
            padding: 12px 15px;
            margin-bottom: 10px;
            border: 1px solid #e0e0e0;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.2s ease, border-color 0.2s ease;
            font-size: 1em;
            display: flex;
            align-items: center;
        }

        .options-group label:hover {
            background-color: #f0f8ff;
            border-color: #a3d3ff;
        }
        .options-group input[type="radio"] {
            margin-right: 10px;
            transform: scale(1.1);
        }

        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }
        .navigation-buttons button {
            background-color: #007bff;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            font-size: 1em;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        .navigation-buttons button:hover {
            background-color: #0056b3;
        }
        .navigation-buttons button:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
        }

        /* Result Section */
        #result-section {
            display: none; /* Wird per JS eingeblendet */
            padding-top: 30px;
            border-top: 1px solid #eee;
            margin-top: 40px;
        }
        #result-section h2 {
            font-size: 2em;
            color: #2c3e50;
            text-align: center;
            margin-bottom: 20px;
        }
        #result-text {
            font-size: 1.2em;
            font-weight: 600;
            color: #333; /* Schwarz/dunkles Grau, wie gewünscht */
            text-align: center;
            margin-bottom: 30px;
        }
        #chart-container {
            max-width: 600px;
            margin: 30px auto;
            padding: 20px;
            background-color: #fdfdfd;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.08);
        }

        .type-description-box {
            background-color: #f8f9fa;
            border-left: 5px solid #007bff;
            border-radius: 5px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.08);
        }
        .type-description-box h3 {
            color: #007bff;
            margin-top: 0;
            margin-bottom: 15px;
            text-align: left;
            font-size: 1.3em;
        }
        .type-description-box p {
            margin-bottom: 10px;
            font-size: 1em;
        }
        .type-description-box ul {
            padding-left: 20px;
            list-style-type: disc;
            margin-bottom: 10px;
        }
        .type-description-box ul li {
            margin-bottom: 5px;
        }

        #restart-button {
            background-color: #6c757d;
            color: white;
            padding: 12px 25px;
            border: none;
            border-radius: 5px;
            font-size: 1.1em;
            cursor: pointer;
            transition: background-color 0.3s ease;
            margin-top: 40px;
            display: block;
            width: fit-content;
            margin-left: auto;
            margin-right: auto;
        }
        #restart-button:hover {
            background-color: #5a6268;
        }

        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            #test-container {
                padding: 20px;
            }
            h1 {
                font-size: 2em;
            }
            .question-block {
                padding: 15px;
            }
            .options-group label {
                padding: 10px;
                font-size: 0.95em;
            }
            .navigation-buttons button {
                padding: 8px 15px;
                font-size: 0.9em;
            }
        }
    </style>
</head>
<body>
    <img src="https://img.welt.de/img/wirtschaft/karriere/mobile243003009/9821389027-ci102l-w1024/DISC-Modell-Das-steckt-hinter-den-vier-Persoenlichkeitstypen-des-DISC-Modells.jpg" alt="DISC Modell" class="disc-model-image">

    <div id="test-container">
        <div id="intro-section">
            <h1>DISC Persönlichkeitstest</h1>
            <p>Willkommen zu diesem Test! Dieser Test hilft Ihnen, Ihre Präferenzen und Verhaltensweisen in verschiedenen Situationen besser zu verstehen, basierend auf dem DISC-Modell.</p>
            <p>Bitte wählen Sie bei jeder Frage die Option, die am besten zu Ihnen passt.</p>
            <button id="start-test-button">Test starten</button>
        </div>

        <div id="quiz-section">
            <h2 id="question-counter">Frage 1 von 24</h2>
            <div id="question-display" class="question-block">
                </div>
            <div class="navigation-buttons">
                <button id="prev-button" disabled>Zurück</button>
                <button id="next-button">Nächste Frage</button>
                <button id="submit-button" style="display: none;">Ergebnis anzeigen</button>
            </div>
        </div>

        <div id="result-section">
            <h2>Ihr Testergebnis</h2>
            <p id="result-text">
                </p>

            <h3>Ihre Persönlichkeitsprofile:</h3>
            <div id="chart-container">
                <canvas id="discChart"></canvas>
            </div>

            <div id="detailed-disc-descriptions">
                </div>
            <button id="restart-button">Test wiederholen</button>
        </div>
    </div>

    <script>
        // Fragen und Optionen aus Ihrer Originaldatei, unverändert übernommen
        const questions = [
            {
                question: "Wie würden Sie sich am ehesten beschreiben?",
                options: {
                    D: "Direkt, entscheidungsfreudig, ergebnisorientiert",
                    I: "Begeisternd, überzeugend, gesellig",
                    S: "Stabil, zuverlässig, unterstützend",
                    C: "Analytisch, präzise, vorsichtig"
                }
            },
            {
                question: "Was motiviert Sie am meisten?",
                options: {
                    D: "Herausforderungen und Wettbewerb",
                    I: "Anerkennung und soziale Interaktion",
                    S: "Sicherheit und Harmonie",
                    C: "Qualität und Korrektheit"
                }
            },
            {
                question: "Wie reagieren Sie auf Druck?",
                options: {
                    D: "Werden Sie energischer und zielstrebiger",
                    I: "Werden Sie gesprächiger und versuchen, zu überzeugen",
                    S: "Werden Sie zurückhaltender und suchen nach Stabilität",
                    C: "Werden Sie kritischer und suchen nach Fakten"
                }
            },
            {
                question: "Was ist Ihre größte Stärke?",
                options: {
                    D: "Führungsstärke und Entschlossenheit",
                    I: "Optimismus und Einfluss",
                    S: "Loyalität und Beständigkeit",
                    C: "Detailgenauigkeit und Systematik"
                }
            },
            {
                question: "Was ist Ihre größte Angst?",
                options: {
                    D: "Kontrollverlust",
                    I: "Ablehnung und fehlende soziale Akzeptanz",
                    S: "Veränderung und Instabilität",
                    C: "Fehler und Ungenauigkeit"
                }
            },
            {
                question: "Wie gehen Sie mit Veränderungen um?",
                options: {
                    D: "Passen sich schnell an und sehen neue Chancen",
                    I: "Versuchen, andere zu überzeugen und zu begeistern",
                    S: "Bevorzugen Stabilität und brauchen Zeit zur Anpassung",
                    C: "Analysieren die Veränderungen kritisch und suchen nach Fakten"
                }
            },
            {
                question: "Wie treffen Sie Entscheidungen?",
                options: {
                    D: "Schnell und entschlossen, oft intuitiv",
                    I: "Impulsiv und beeinflussbar durch andere",
                    S: "Langsam und überlegt, um Konsens zu finden",
                    C: "Logisch und datenbasiert, nach gründlicher Analyse"
                }
            },
            {
                question: "Was ist Ihre bevorzugte Kommunikationsform?",
                options: {
                    D: "Direkt und auf den Punkt",
                    I: "Enthusiastisch und persönlich",
                    S: "Ruhig und unterstützend",
                    C: "Präzise und detailliert"
                }
            },
            {
                question: "Wie arbeiten Sie am liebsten in einem Team?",
                options: {
                    D: "Als Führungsperson, die die Richtung vorgibt",
                    I: "Als Motivator, der gute Stimmung verbreitet",
                    S: "Als loyaler Unterstützer, der Harmonie schafft",
                    C: "Als Experte, der für Qualität und Richtigkeit sorgt"
                }
            },
            {
                question: "Was ist Ihnen bei der Arbeit am wichtigsten?",
                options: {
                    D: "Ergebnisse und Erfolge",
                    I: "Zusammenarbeit und Anerkennung",
                    S: "Stabilität und Vorhersehbarkeit",
                    C: "Struktur und Genauigkeit"
                }
            },
            {
                question: "Wie reagieren Sie auf Konflikte?",
                options: {
                    D: "Gehen Sie diese direkt an und suchen nach Lösungen",
                    I: "Versuchen Sie, die Situation zu entschärfen und Harmonie zu schaffen",
                    S: "Vermeiden Sie Konflikte und suchen nach Kompromissen",
                    C: "Analysieren Sie den Konflikt, um die Ursachen zu verstehen"
                }
            },
            {
                question: "Was schätzen Sie an anderen am meisten?",
                options: {
                    D: "Kompetenz und Effizienz",
                    I: "Optimismus und Freundlichkeit",
                    S: "Beständigkeit und Zuverlässigkeit",
                    C: "Intelligenz und Sorgfalt"
                }
            },
            {
                question: "Wie gehen Sie mit Risiken um?",
                options: {
                    D: "Gehen Sie Risiken ein, wenn die Chancen hoch sind",
                    I: "Sind Sie offen für Risiken, wenn sie spannend sind",
                    S: "Bevorzugen Sie Sicherheit und meiden Risiken",
                    C: "Minimieren Sie Risiken durch gründliche Analyse"
                }
            },
            {
                question: "Was ist Ihr natürlicher Arbeitsstil?",
                options: {
                    D: "Schnell und ergebnisorientiert",
                    I: "Spontan und enthusiastisch",
                    S: "Geduldig und beständig",
                    C: "Systematisch und präzise"
                }
            },
            {
                question: "Wie äußern Sie Ihre Meinungen?",
                options: {
                    D: "Direkt und klar",
                    I: "Überzeugend und wortreich",
                    S: "Ruhig und bedacht",
                    C: "Logisch und mit Fakten untermauert"
                }
            },
            {
                question: "Was ist Ihnen in einer Beziehung am wichtigsten?",
                options: {
                    D: "Respekt und Unabhängigkeit",
                    I: "Spaß und gemeinsame Erlebnisse",
                    S: "Vertrauen und Geborgenheit",
                    C: "Verständnis und intellektueller Austausch"
                }
            },
            {
                question: "Wie verbringen Sie Ihre Freizeit am liebsten?",
                options: {
                    D: "Mit Aktivitäten, die Herausforderungen bieten",
                    I: "Mit sozialen Treffen und Unterhaltung",
                    S: "Mit entspannenden und vertrauten Routinen",
                    C: "Mit Lesen, Lernen und Problemlösung"
                }
            },
            {
                question: "Wie gehen Sie mit Fehlern um?",
                options: {
                    D: "Lernen Sie daraus und machen weiter",
                    I: "Suchen Sie nach Entschuldigungen oder Ablenkungen",
                    S: "Fühlen Sie sich unwohl und brauchen Unterstützung",
                    C: "Analysieren Sie den Fehler, um ihn zukünftig zu vermeiden"
                }
            },
            {
                question: "Was ist Ihr bevorzugtes Arbeitsumfeld?",
                options: {
                    D: "Dynamisch und wettbewerbsorientiert",
                    I: "Offen und kollaborativ",
                    S: "Harmonisch und unterstützend",
                    C: "Strukturiert und methodisch"
                }
            },
            {
                question: "Wie gehen Sie mit Kritik um?",
                options: {
                    D: "Nehmen Sie sie direkt auf, wenn sie berechtigt ist",
                    I: "Können Sie persönlich nehmen, suchen aber nach Bestätigung",
                    S: "Sind Sie sensibel und brauchen sanftes Feedback",
                    C: "Analysieren Sie die Kritik rational und suchen nach Fakten"
                }
            },
            {
                question: "Was ist Ihr Beitrag in einem Team?",
                options: {
                    D: "Treiber von Ergebnissen",
                    I: "Stimmungsmacher und Motivator",
                    S: "Stabilisierender Faktor und Unterstützer",
                    C: "Qualitätssicherer und Problemlöser"
                }
            },
            {
                question: "Wie gehen Sie mit Routinen um?",
                options: {
                    D: "Schätzen Sie, wenn sie zu schnellen Ergebnissen führen",
                    I: "Mögen Sie Abwechslung und neue Erfahrungen",
                    S: "Bevorzugen Sie Routinen für Stabilität und Komfort",
                    C: "Schätzen Sie Routinen für Präzision und Effizienz"
                }
            },
            {
                question: "Was ist Ihr größter Wunsch im Berufsleben?",
                options: {
                    D: "Führung und Einfluss",
                    I: "Beliebtheit und soziale Anerkennung",
                    S: "Sicherheit und Beständigkeit",
                    C: "Kompetenz und Expertise"
                }
            },
            {
                question: "Wie reagieren Sie auf Langeweile?",
                options: {
                    D: "Suchen Sie nach neuen Herausforderungen und Aufgaben",
                    I: "Suchen Sie nach sozialer Interaktion und Unterhaltung",
                    S: "Bleiben Sie geduldig und arbeiten Sie weiter",
                    C: "Suchen Sie nach komplexen Problemen, die gelöst werden müssen"
                }
            }
        ];

        // Beschreibungen für die DISC-Typen, unverändert übernommen
        const discDescriptions = {
            D: {
                name: "Dominant (D)",
                description: `
                    <div class="type-description-box">
                        <h3>Dominant (D)</h3>
                        <p>Dominante Typen sind ergebnisorientiert, entschlossen und direkt. Sie lieben Herausforderungen und sind motiviert von Erfolgen und Kontrolle. Sie neigen dazu, Risiken einzugehen und sind oft die treibende Kraft in Projekten. Im Team übernehmen sie gerne die Führung und sind zielstrebig.</p>
                        <ul>
                            <li>**Stärken:** Entschlossenheit, Führungskraft, Problemlösung, Ergebnisorientierung.</li>
                            <li>**Herausforderungen:** Kann als ungeduldig oder überheblich wirken, neigt zu direkter Konfrontation.</li>
                            <li>**Kommunikationstipp:** Seien Sie direkt, sachlich und auf den Punkt. Konzentrieren Sie sich auf Ergebnisse und Effizienz.</li>
                        </ul>
                    </div>
                `
            },
            I: {
                name: "Initiativ (I)",
                description: `
                    <div class="type-description-box">
                        <h3>Initiativ (I)</h3>
                        <p>Initiative Typen sind enthusiastisch, optimistisch und gesellig. Sie lieben soziale Interaktionen, sind überzeugend und inspirieren andere. Sie sind kreative Denker und suchen nach Anerkennung und Aufmerksamkeit. Im Team tragen sie zu einer positiven Atmosphäre bei und sind gute Netzwerker.</p>
                        <ul>
                            <li>**Stärken:** Überzeugungskraft, Enthusiasmus, Kreativität, Offenheit.</li>
                            <li>**Herausforderungen:** Kann unorganisiert oder sprunghaft wirken, neigt zu Überredung.</li>
                            <li>**Kommunikationstipp:** Zeigen Sie Interesse an ihren Ideen, seien Sie enthusiastisch und bieten Sie Möglichkeiten zur Interaktion und Anerkennung.</li>
                        </ul>
                    </div>
                `
            },
            S: {
                name: "Stetig (S)",
                description: `
                    <div class="type-description-box">
                        <h3>Stetig (S)</h3>
                        <p>Stetige Typen sind geduldig, zuverlässig und unterstützend. Sie bevorzugen Stabilität und Sicherheit und sind loyale Teamplayer. Sie sind gute Zuhörer und Mediatoren, die Harmonie und ein stabiles Umfeld schätzen. Sie sind beständig und arbeiten gerne in einem vorhersehbaren Rahmen.</p>
                        <ul>
                            <li>**Stärken:** Loyalität, Geduld, Empathie, Zuverlässigkeit, Teamfähigkeit.</li>
                            <li>**Herausforderungen:** Kann veränderungsresistent oder zögerlich wirken, vermeidet Konflikte.</li>
                            <li>**Kommunikationstipp:** Seien Sie geduldig, bieten Sie Unterstützung an und betonen Sie Sicherheit und Beständigkeit. Geben Sie Feedback sanft.</li>
                        </ul>
                    </div>
                `
            },
            C: {
                name: "Gewissenhaft (C)",
                description: `
                    <div class="type-description-box">
                        <h3>Gewissenhaft (C)</h3>
                        <p>Gewissenhafte Typen sind analytisch, präzise und detailorientiert. Sie streben nach Korrektheit und hoher Qualität, arbeiten systematisch und sind oft Experten in ihrem Bereich. Sie hinterfragen gerne und basieren ihre Entscheidungen auf Fakten und Logik. Im Team sind sie die Garanten für Genauigkeit und Sorgfalt.</p>
                        <ul>
                            <li>**Stärken:** Genauigkeit, Analysefähigkeit, Logik, Systematik, Qualitätsbewusstsein.</li>
                            <li>**Herausforderungen:** Kann als zu kritisch oder langsam wirken, neigt zu Perfektionismus.</li>
                            <li>**Kommunikationstipp:** Seien Sie präzise, faktenbasiert und bieten Sie detaillierte Informationen an. Achten Sie auf Logik und Struktur.</li>
                        </ul>
                    </div>
                `
            }
        };

        let currentQuestionIndex = 0;
        let userAnswers = new Array(questions.length).fill(null); // Speichert die ausgewählte Antwort für jede Frage

        // DOM-Elemente
        const introSection = document.getElementById('intro-section');
        const quizSection = document.getElementById('quiz-section');
        const resultSection = document.getElementById('result-section');
        const startTestButton = document.getElementById('start-test-button');
        const questionCounter = document.getElementById('question-counter');
        const questionDisplay = document.getElementById('question-display');
        const prevButton = document.getElementById('prev-button');
        const nextButton = document.getElementById('next-button');
        const submitButton = document.getElementById('submit-button');
        const resultTextDiv = document.getElementById('result-text');
        const detailedDiscDescriptionsDiv = document.getElementById('detailed-disc-descriptions');
        const restartButton = document.getElementById('restart-button');

        let myChartInstance = null; // Variable, um die Chart-Instanz zu speichern

        // Event Listener
        startTestButton.addEventListener('click', startTest);
        nextButton.addEventListener('click', showNextQuestion);
        prevButton.addEventListener('click', showPreviousQuestion);
        submitButton.addEventListener('click', calculateResult);
        restartButton.addEventListener('click', restartTest);

        function startTest() {
            introSection.style.display = 'none';
            quizSection.style.display = 'block';
            currentQuestionIndex = 0;
            userAnswers.fill(null); // Reset answers
            renderQuestion();
            updateNavigationButtons();
        }

        function renderQuestion() {
            const q = questions[currentQuestionIndex];
            let optionsHtml = '';
            for (const key in q.options) {
                optionsHtml += `
                    <label>
                        <input type="radio" name="question-${currentQuestionIndex}" value="${key}" ${userAnswers[currentQuestionIndex] === key ? 'checked' : ''}>
                        ${q.options[key]}
                    </label>
                `;
            }

            questionDisplay.innerHTML = `
                <p><span>${currentQuestionIndex + 1}.</span> ${q.question}</p>
                <div class="options-group">
                    ${optionsHtml}
                </div>
            `;
            // Listener für Radio-Buttons hinzufügen
            document.querySelectorAll(`input[name="question-${currentQuestionIndex}"]`).forEach(radio => {
                radio.addEventListener('change', (event) => {
                    userAnswers[currentQuestionIndex] = event.target.value;
                    updateNavigationButtons(); // Enable next/submit button if an answer is selected
                });
            });
            questionCounter.textContent = `Frage ${currentQuestionIndex + 1} von ${questions.length}`;
            updateNavigationButtons();
        }

        function updateNavigationButtons() {
            prevButton.disabled = currentQuestionIndex === 0;
            const currentAnswered = userAnswers[currentQuestionIndex] !== null;

            if (currentQuestionIndex === questions.length - 1) {
                nextButton.style.display = 'none';
                submitButton.style.display = currentAnswered ? 'inline-block' : 'none'; // Show submit only if last question answered
                submitButton.disabled = !currentAnswered;
            } else {
                nextButton.style.display = 'inline-block';
                submitButton.style.display = 'none';
                nextButton.disabled = !currentAnswered;
            }
        }

        function showNextQuestion() {
            if (userAnswers[currentQuestionIndex] === null) {
                alert("Bitte wähle eine Antwort, bevor du fortfährst.");
                return;
            }
            currentQuestionIndex++;
            if (currentQuestionIndex < questions.length) {
                renderQuestion();
            }
        }

        function showPreviousQuestion() {
            currentQuestionIndex--;
            renderQuestion();
        }

        function calculateResult() {
            if (userAnswers.some(answer => answer === null)) { // Prüfen, ob alle Fragen beantwortet sind
                alert("Bitte beantworte alle Fragen, bevor du das Ergebnis anzeigst.");
                return;
            }

            const counts = { D: 0, I: 0, S: 0, C: 0 };
            userAnswers.forEach(answer => {
                counts[answer]++;
            });

            // Finden des dominantesten Typs (oder Typen bei Gleichstand)
            let maxCount = 0;
            let dominantTypes = [];
            for (const type in counts) {
                if (counts[type] > maxCount) {
                    maxCount = counts[type];
                    dominantTypes = [type];
                } else if (counts[type] === maxCount) {
                    dominantTypes.push(type);
                }
            }

            let resultHtml = '';
            if (dominantTypes.length === 1) {
                const typeKey = dominantTypes[0];
                resultHtml = `Ihr dominantester Typ ist: <strong>${discDescriptions[typeKey].name}</strong>.`;
            } else if (dominantTypes.length > 1) {
                resultHtml = `Sie haben mehrere dominante Tendenzen: <strong>${dominantTypes.map(key => discDescriptions[key].name).join(', ')}</strong>.`;
            } else {
                resultHtml = 'Ihr Persönlichkeitstyp konnte nicht eindeutig bestimmt werden. Bitte stellen Sie sicher, dass alle Fragen beantwortet wurden.';
            }
            resultTextDiv.innerHTML = resultHtml;

            // Anzeigen der detaillierten Beschreibungen
            detailedDiscDescriptionsDiv.innerHTML = '';
            // Sortiere die Typen nach absteigender Häufigkeit
            const sortedTypes = Object.keys(counts).sort((a, b) => counts[b] - counts[a]);

            sortedTypes.forEach(typeKey => {
                if (counts[typeKey] > 0) { // Nur Typen anzeigen, die mindestens einmal gewählt wurden
                     detailedDiscDescriptionsDiv.innerHTML += discDescriptions[typeKey].description;
                }
            });


            quizSection.style.display = 'none';
            resultSection.style.display = 'block';

            renderChart(counts);
            resultSection.scrollIntoView({ behavior: 'smooth' });
        }

        function renderChart(counts) {
            const ctx = document.getElementById('discChart').getContext('2d');

            if (myChartInstance) {
                myChartInstance.destroy();
            }

            const chartLabels = ['Dominant (D)', 'Initiativ (I)', 'Stetig (S)', 'Gewissenhaft (C)'];
            const chartDataValues = [counts.D, counts.I, counts.S, counts.C];

            const backgroundColors = [
                'rgba(255, 99, 132, 0.7)', // D - Rot
                'rgba(54, 162, 235, 0.7)', // I - Blau
                'rgba(75, 192, 192, 0.7)', // S - Grün
                'rgba(153, 102, 255, 0.7)'  // C - Lila
            ];
            const borderColors = [
                'rgba(255, 99, 132, 1)',
                'rgba(54, 162, 235, 1)',
                'rgba(75, 192, 192, 1)',
                'rgba(153, 102, 255, 1)'
            ];

            myChartInstance = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: chartLabels,
                    datasets: [{
                        label: 'Anzahl Ihrer Antworten',
                        data: chartDataValues,
                        backgroundColor: backgroundColors,
                        borderColor: borderColors,
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: questions.length, // Max. mögliche Punkte pro Typ
                            ticks: {
                                stepSize: 1
                            },
                            title: {
                                display: true,
                                text: 'Anzahl der Auswahlen'
                            }
                        },
                        x: {
                            title: {
                                display: true,
                                text: 'DISC Typ'
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    let label = context.dataset.label || '';
                                    if (label) {
                                        label += ': ';
                                    }
                                    if (context.parsed.y !== null) {
                                        label += context.parsed.y + ' Punkte';
                                    }
                                    return label;
                                }
                            }
                        }
                    }
                }
            });
        }

        function restartTest() {
            if (myChartInstance) {
                myChartInstance.destroy();
                myChartInstance = null;
            }

            currentQuestionIndex = 0;
            userAnswers.fill(null);

            introSection.style.display = 'block';
            quizSection.style.display = 'none';
            resultSection.style.display = 'none';

            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Initialisiere den Test beim Laden der Seite
        document.addEventListener('DOMContentLoaded', () => {
            introSection.style.display = 'block';
            quizSection.style.display = 'none';
            resultSection.style.display = 'none';
        });
    </script>
</body>
</html>
