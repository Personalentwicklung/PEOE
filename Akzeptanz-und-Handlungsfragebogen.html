
<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AAQ-Rev-16 Fragebogen</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* Allgemeine Einstellungen für den Body */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; /* Modernere Schriftart */
            margin: 0;
            padding: 40px 20px; /* Mehr Polsterung oben/unten */
            background-color: #f0f2f5; /* Heller Hintergrund */
            color: #333; /* Dunkler Text */
            display: flex;
            justify-content: center; /* Zentriert den Inhalt horizontal */
            align-items: flex-start; /* Hält den Inhalt oben, nicht mittig vertikal */
            min-height: 100vh; /* Mindesthöhe des Bodys */
        }

        /* Container für den gesamten Test, um ihn zu zentrieren und zu stylen */
        .container {
            background-color: #ffffff;
            padding: 40px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1); /* Sanfter Schatten */
            max-width: 800px; /* Maximale Breite für bessere Lesbarkeit */
            width: 100%;
            box-sizing: border-box; /* Polsterung innerhalb der Breite */
        }

        h1 {
            color: #0056b3; /* Dunkelblau für Überschrift */
            text-align: center;
            margin-bottom: 30px;
            font-size: 2.2em; /* Größere Überschrift */
        }

        p {
            font-size: 1.1em;
            line-height: 1.6;
            margin-bottom: 20px;
        }

        .question {
            margin-bottom: 25px; /* Abstand NACH jeder Frage */
            padding: 15px 0;    /* Polsterung innerhalb der Frage-Box */
            border-bottom: 1px solid #eee; /* Trennlinie zwischen Fragen */
        }

        .question:last-of-type {
            border-bottom: none; /* Keine Trennlinie nach der letzten Frage */
        }

        .question label:first-of-type { /* Für den Fragetext selbst */
            font-weight: bold;
            margin-bottom: 15px;
            font-size: 1.1em;
            color: #555;
            display: block;
        }

        .scale {
            display: flex;
            justify-content: space-between;
            background-color: #f9f9f9;
            border-radius: 8px;
            overflow: hidden; /* Für abgerundete Ecken der inneren Labels */
            border: 1px solid #ddd;
            margin-top: 10px; /* Abstand zum Fragetext */
        }

        .scale label {
            flex: 1;
            text-align: center;
            font-size: 0.9em;
            padding: 12px 5px; /* Innenabstand für Klickbereich */
            cursor: pointer;
            transition: background-color 0.3s ease, border-color 0.3s ease;
            border-right: 1px solid #eee; /* Trennlinien zwischen den Optionen */
            position: relative; /* Für die Radio-Buttons */
            color: #666;
        }

        .scale label:last-of-type {
            border-right: none; /* Keine Linie nach der letzten Option */
        }

        .scale label:hover {
            background-color: #e9f0f9; /* Hellerer Hintergrund beim Hover */
        }

        .scale input[type="radio"] {
            position: absolute;
            opacity: 0; /* Versteckt den eigentlichen Radio-Button */
            pointer-events: none; /* Macht ihn nicht anklickbar direkt */
        }

        .scale input[type="radio"]:checked + span {
            background-color: #007bff; /* Hintergrund, wenn ausgewählt */
            color: white;
            font-weight: bold;
            border-color: #007bff;
        }

        .scale label span { /* Der sichtbare Teil der Auswahl */
            display: block;
            width: 100%;
            height: 100%;
            position: absolute;
            top: 0;
            left: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px; /* Nur wenn es keine Linien gibt */
            transition: background-color 0.3s ease, color 0.3s ease;
        }


        /* Spezielles Styling für die Zahlendarstellung in der Skala */
        .scale label input[type="radio"] + span {
            font-size: 1.1em; /* Macht die Zahlen größer */
        }


        /* Styling für den Absenden-Button */
        button {
            display: block; /* Button nimmt ganze Breite ein */
            width: 100%;
            padding: 15px 20px;
            background-color: #28a745; /* Grün für "Absenden" */
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 1.2em;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.2s ease;
            margin-top: 30px;
        }

        button:hover {
            background-color: #218838; /* Dunkleres Grün beim Hover */
            transform: translateY(-2px);
        }

        button:active {
            transform: translateY(0);
        }

        /* Styling für das Ergebnis-Feld */
        .result {
            display: none; /* Bleibt unsichtbar bis zur Berechnung */
            margin-top: 30px;
            padding: 25px;
            background-color: #e6f7ff; /* Sehr hellblau */
            border: 1px solid #b3e0ff; /* Hellblauer Rahmen */
            border-radius: 8px;
            text-align: center;
            font-size: 1.1em;
            line-height: 1.6;
        }

        .result h2 {
            color: #0056b3;
            margin-top: 0;
            font-size: 1.8em;
        }

        .result p {
            font-size: 1.1em; /* Etwas kleiner als der Haupt-Ergebnistext */
            color: #333;
            margin-bottom: 10px;
        }
        .result p:last-of-type {
            margin-bottom: 0;
        }

        /* Styling für den detaillierten Ergebnisbereich mit Chart */
        #detailed-results {
            margin-top: 20px;
            text-align: left;
            padding: 15px;
            background-color: #f7fcff; /* Noch helleres Blau für diesen Bereich */
            border-radius: 5px;
            border: 1px solid #cceeff; /* Leichterer Rand */
        }
        #detailed-results h3 {
            color: #0056b3;
            margin-top: 0;
            margin-bottom: 10px;
            font-size: 1.5em;
            text-align: center;
        }

        /* NEUE/ANGEPASSTE CSS-REGEL FÜR DAS CANVAS-ELEMENT */
        #aaqChart {
            max-height: 300px; /* Begrenzt die Höhe des Diagramms */
            width: 100% !important; /* Stellt sicher, dass es die volle Breite des Containers einnimmt */
            height: auto !important; /* Lässt die Höhe proportional skalieren */
            margin-top: 15px;
        }

        /* Media Queries für Responsivität auf kleineren Bildschirmen */
        @media (max-width: 768px) {
            body {
                padding: 20px 10px;
            }
            .container {
                padding: 20px;
                box-shadow: none; /* Kein Schatten auf kleinen Geräten für bessere Performance */
            }
            h1 {
                font-size: 1.8em;
            }
            .question label:first-of-type {
                font-size: 1em;
            }
            .scale label {
                padding: 10px 3px;
                font-size: 0.85em;
            }
            button {
                font-size: 1.1em;
                padding: 12px 15px;
            }
            .result h2 {
                font-size: 1.5em;
            }
            .result p {
                font-size: 1em;
            }
            #detailed-results h3 {
                font-size: 1.3em;
            }
            #aaqChart {
                max-height: 200px; /* Oder eine andere Höhe für kleinere Bildschirme */
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>AAQ-Rev-16 Fragebogen</h1>
        <p>Bitte wählen Sie eine zutreffende Aussage mit dem jeweiligen Button. 1 = nie zutreffend – 7 = immer zutreffend.</p>
        <form id="aaqForm">
            <div class="question">
                <label for="q1">1. Ich bin in der Lage bei einem Problem aktiv zu werden, selbst wenn ich mir unsicher bin, was das Richtige ist. </label>
                <div class="scale">
                    <label><input type="radio" name="q1" value="1"><span>1</span></label>
                    <label><input type="radio" name="q1" value="2"><span>2</span></label>
                    <label><input type="radio" name="q1" value="3"><span>3</span></label>
                    <label><input type="radio" name="q1" value="4"><span>4</span></label>
                    <label><input type="radio" name="q1" value="5"><span>5</span></label>
                    <label><input type="radio" name="q1" value="6"><span>6</span></label>
                    <label><input type="radio" name="q1" value="7"><span>7</span></label>
                </div>
            </div>

            <div class="question">
                <label for="q2">2. Wenn ich mich deprimiert und ängstlich fühle, bin ich unfähig, mich um meine Aufgaben zu kümmern. </label>
                <div class="scale">
                    <label><input type="radio" name="q2" value="1"><span>1</span></label>
                    <label><input type="radio" name="q2" value="2"><span>2</span></label>
                    <label><input type="radio" name="q2" value="3"><span>3</span></label>
                    <label><input type="radio" name="q2" value="4"><span>4</span></label>
                    <label><input type="radio" name="q2" value="5"><span>5</span></label>
                    <label><input type="radio" name="q2" value="6"><span>6</span></label>
                    <label><input type="radio" name="q2" value="7"><span>7</span></label>
                </div>
            </div>

            <div class="question">
                <label for="q3">3. Ich versuche Gedanken und Gefühle zu unterdrücken die ich nicht mag, indem ich einfach nicht an sie denke. </label>
                <div class="scale">
                    <label><input type="radio" name="q3" value="1"><span>1</span></label>
                    <label><input type="radio" name="q3" value="2"><span>2</span></label>
                    <label><input type="radio" name="q3" value="3"><span>3</span></label>
                    <label><input type="radio" name="q3" value="4"><span>4</span></label>
                    <label><input type="radio" name="q3" value="5"><span>5</span></label>
                    <label><input type="radio" name="q3" value="6"><span>6</span></label>
                    <label><input type="radio" name="q3" value="7"><span>7</span></label>
                </div>
            </div>

            <div class="question">
                <label for="q4">4. Es ist in Ordnung sich deprimiert oder ängstlich zu fühlen. </label>
                <div class="scale">
                    <label><input type="radio" name="q4" value="1"><span>1</span></label>
                    <label><input type="radio" name="q4" value="2"><span>2</span></label>
                    <label><input type="radio" name="q4" value="3"><span>3</span></label>
                    <label><input type="radio" name="q4" value="4"><span>4</span></label>
                    <label><input type="radio" name="q4" value="5"><span>5</span></label>
                    <label><input type="radio" name="q4" value="6"><span>6</span></label>
                    <label><input type="radio" name="q4" value="7"><span>7</span></label>
                </div>
            </div>

            <div class="question">
                <label for="q5">5. Ich mache mir selten Gedanken, wie ich meine Ängste, Sorgen und Gefühle unter Kontrolle bekommen kann. </label>
                <div class="scale">
                    <label><input type="radio" name="q5" value="1"><span>1</span></label>
                    <label><input type="radio" name="q5" value="2"><span>2</span></label>
                    <label><input type="radio" name="q5" value="3"><span>3</span></label>
                    <label><input type="radio" name="q5" value="4"><span>4</span></label>
                    <label><input type="radio" name="q5" value="5"><span>5</span></label>
                    <label><input type="radio" name="q5" value="6"><span>6</span></label>
                    <label><input type="radio" name="q5" value="7"><span>7</span></label>
                </div>
            </div>

            <div class="question">
                <label for="q6">6. Um etwas Wichtiges zu machen, muss ich erst alle Zweifel aufräumen. </label>
                <div class="scale">
                    <label><input type="radio" name="q6" value="1"><span>1</span></label>
                    <label><input type="radio" name="q6" value="2"><span>2</span></label>
                    <label><input type="radio" name="q6" value="3"><span>3</span></label>
                    <label><input type="radio" name="q6" value="4"><span>4</span></label>
                    <label><input type="radio" name="q6" value="5"><span>5</span></label>
                    <label><input type="radio" name="q6" value="6"><span>6</span></label>
                    <label><input type="radio" name="q6" value="7"><span>7</span></label>
                </div>
            </div>

            <div class="question">
                <label for="q7">7. Ich habe keine Angst vor meinen Gefühlen. </label>
                <div class="scale">
                    <label><input type="radio" name="q7" value="1"><span>1</span></label>
                    <label><input type="radio" name="q7" value="2"><span>2</span></label>
                    <label><input type="radio" name="q7" value="3"><span>3</span></label>
                    <label><input type="radio" name="q7" value="4"><span>4</span></label>
                    <label><input type="radio" name="q7" value="5"><span>5</span></label>
                    <label><input type="radio" name="q7" value="6"><span>6</span></label>
                    <label><input type="radio" name="q7" value="7"><span>7</span></label>
                </div>
            </div>

            <div class="question">
                <label for="q8">8. Ich gebe mir wirklich viel Mühe, um mich nicht deprimiert oder ängstlich zu fühlen. </label>
                <div class="scale">
                    <label><input type="radio" name="q8" value="1"><span>1</span></label>
                    <label><input type="radio" name="q8" value="2"><span>2</span></label>
                    <label><input type="radio" name="q8" value="3"><span>3</span></label>
                    <label><input type="radio" name="q8" value="4"><span>4</span></label>
                    <label><input type="radio" name="q8" value="5"><span>5</span></label>
                    <label><input type="radio" name="q8" value="6"><span>6</span></label>
                    <label><input type="radio" name="q8" value="7"><span>7</span></label>
                </div>
            </div>

            <div class="question">
                <label for="q9">9. Angst ist etwas Schlechtes. </label>
                <div class="scale">
                    <label><input type="radio" name="q9" value="1"><span>1</span></label>
                    <label><input type="radio" name="q9" value="2"><span>2</span></label>
                    <label><input type="radio" name="q9" value="3"><span>3</span></label>
                    <label><input type="radio" name="q9" value="4"><span>4</span></label>
                    <label><input type="radio" name="q9" value="5"><span>5</span></label>
                    <label><input type="radio" name="q9" value="6"><span>6</span></label>
                    <label><input type="radio" name="q9" value="7"><span>7</span></label>
                </div>
            </div>

            <div class="question">
                <label for="q10">10. Trotz Zweifels glaube ich, meinem Leben eine Richtung geben zu können, an die ich mich halten kann. </label>
                <div class="scale">
                    <label><input type="radio" name="q10" value="1"><span>1</span></label>
                    <label><input type="radio" name="q10" value="2"><span>2</span></label>
                    <label><input type="radio" name="q10" value="3"><span>3</span></label>
                    <label><input type="radio" name="q10" value="4"><span>4</span></label>
                    <label><input type="radio" name="q10" value="5"><span>5</span></label>
                    <label><input type="radio" name="q10" value="6"><span>6</span></label>
                    <label><input type="radio" name="q10" value="7"><span>7</span></label>
                </div>
            </div>

            <div class="question">
                <label for="q11">11. Wenn ich alle schmerzvollen Erfahrungen, die ich in meinem Leben gemacht habe, weg- zaubern könnte, würde ich dies sofort tun. </label>
                <div class="scale">
                    <label><input type="radio" name="q11" value="1"><span>1</span></label>
                    <label><input type="radio" name="q11" value="2"><span>2</span></label>
                    <label><input type="radio" name="q11" value="3"><span>3</span></label>
                    <label><input type="radio" name="q11" value="4"><span>4</span></label>
                    <label><input type="radio" name="q11" value="5"><span>5</span></label>
                    <label><input type="radio" name="q11" value="6"><span>6</span></label>
                    <label><input type="radio" name="q11" value="7"><span>7</span></label>
                </div>
            </div>

            <div class="question">
                <label for="q12">12. Ich habe mein Leben im Griff. </label>
                <div class="scale">
                    <label><input type="radio" name="q12" value="1"><span>1</span></label>
                    <label><input type="radio" name="q12" value="2"><span>2</span></label>
                    <label><input type="radio" name="q12" value="3"><span>3</span></label>
                    <label><input type="radio" name="q12" value="4"><span>4</span></label>
                    <label><input type="radio" name="q12" value="5"><span>5</span></label>
                    <label><input type="radio" name="q12" value="6"><span>6</span></label>
                    <label><input type="radio" name="q12" value="7"><span>7</span></label>
                </div>
            </div>

            <div class="question">
                <label for="q13">13. Wenn ich mich bei einer Aufgabe langweile, kann ich sie dennoch zu Ende bringen. </label>
                <div class="scale">
                    <label><input type="radio" name="q13" value="1"><span>1</span></label>
                    <label><input type="radio" name="q13" value="2"><span>2</span></label>
                    <label><input type="radio" name="q13" value="3"><span>3</span></label>
                    <label><input type="radio" name="q13" value="4"><span>4</span></label>
                    <label><input type="radio" name="q13" value="5"><span>5</span></label>
                    <label><input type="radio" name="q13" value="6"><span>6</span></label>
                    <label><input type="radio" name="q13" value="7"><span>7</span></label>
                </div>
            </div>

            <div class="question">
                <label for="q14">14. Sorgen können meinem Erfolg im Wege stehen. </label>
                <div class="scale">
                    <label><input type="radio" name="q14" value="1"><span>1</span></label>
                    <label><input type="radio" name="q14" value="2"><span>2</span></label>
                    <label><input type="radio" name="q14" value="3"><span>3</span></label>
                    <label><input type="radio" name="q14" value="4"><span>4</span></label>
                    <label><input type="radio" name="q14" value="5"><span>5</span></label>
                    <label><input type="radio" name="q14" value="6"><span>6</span></label>
                    <label><input type="radio" name="q14" value="7"><span>7</span></label>
                </div>
            </div>

            <div class="question">
                <label for="q15">15. Ich sollte mich so verhalten, wie ich mich im Augenblick fühle. </label>
                <div class="scale">
                    <label><input type="radio" name="q15" value="1"><span>1</span></label>
                    <label><input type="radio" name="q15" value="2"><span>2</span></label>
                    <label><input type="radio" name="q15" value="3"><span>3</span></label>
                    <label><input type="radio" name="q15" value="4"><span>4</span></label>
                    <label><input type="radio" name="q15" value="5"><span>5</span></label>
                    <label><input type="radio" name="q15" value="6"><span>6</span></label>
                    <label><input type="radio" name="q15" value="7"><span>7</span></label>
                </div>
            </div>

            <div class="question">
                <label for="q16">16. Wenn ich verspreche, etwas zu tun, werde ich es tun, selbst wenn es mir später nicht danach sein sollte.</label>
                <div class="scale">
                    <label><input type="radio" name="q16" value="1"><span>1</span></label>
                    <label><input type="radio" name="q16" value="2"><span>2</span></label>
                    <label><input type="radio" name="q16" value="3"><span>3</span></label>
                    <label><input type="radio" name="q16" value="4"><span>4</span></label>
                    <label><input type="radio" name="q16" value="5"><span>5</span></label>
                    <label><input type="radio" name="q16" value="6"><span>6</span></label>
                    <label><input type="radio" name="q16" value="7"><span>7</span></label>
                </div>
            </div>

            <button type="button" onclick="calculateResults()">Absenden</button>
        </form>
        <div id="result" class="result">
            <h2>Deine Ergebnisse:</h2>
            <div id="detailed-results">
                <h3>Deine psychologische Flexibilität:</h3>
                <canvas id="aaqChart"></canvas>
                <p id="total-score"></p>
                <p>Hohe Werte stehen für hohe psychologische Flexibilität (guter Prädiktor für Joberfolg und psychische Gesundheit).</p>
            </div>
        </div>
    </div>
    <script>
        // Eine globale Variable, um die Chart-Instanz zu speichern
        let aaqChartInstance = null;

        function calculateResults() {
            const form = document.getElementById('aaqForm');
            const questions = form.querySelectorAll('.question');
            let allAnswered = true;
            questions.forEach((q, index) => {
                const radios = q.querySelectorAll(`input[name="q${index + 1}"]`);
                let answered = false;
                radios.forEach(radio => {
                    if (radio.checked) {
                        answered = true;
                    }
                });
                if (!answered) {
                    allAnswered = false;
                }
            });

            if (!allAnswered) {
                alert('Bitte beantworte alle Fragen, bevor du das Ergebnis anzeigst.');
                return;
            }

            const formData = new FormData(form);
            let totalFlexibilityScore = 0;

            // Reversed items for AAQ-Rev-16: 2, 3, 6, 8, 9, 11, 14, 15
            const reversedItems = [2, 3, 6, 8, 9, 11, 14, 15];
            const maxScorePerItem = 7;
            const minScorePerItem = 1;
            const numberOfQuestions = 16;
            const maxPossibleScore = numberOfQuestions * maxScorePerItem;

            for (let i = 1; i <= numberOfQuestions; i++) {
                const score = parseInt(formData.get(`q${i}`)); // Direkt den Wert holen
                
                if (reversedItems.includes(i)) {
                    // Reverse scoring for a 7-point scale: (MaxScore + MinScore) - YourScore
                    // In diesem Fall: (7 + 1) - YourScore = 8 - YourScore
                    totalFlexibilityScore += (maxScorePerItem + minScorePerItem) - score;
                } else {
                    totalFlexibilityScore += score;
                }
            }
            
            document.getElementById('total-score').innerText = `Gesamtscore: ${totalFlexibilityScore} / ${maxPossibleScore}`;


            document.getElementById('result').style.display = 'block';

            // ----------- START: Chart.js Integration -----------
            const ctx = document.getElementById('aaqChart').getContext('2d');

            // Wenn schon eine Chart-Instanz existiert, zerstöre sie, bevor eine neue erstellt wird
            if (aaqChartInstance) {
                aaqChartInstance.destroy();
            }

            const percentageScore = (totalFlexibilityScore / maxPossibleScore) * 100;

            const backgroundColors = [
                'rgba(75, 192, 192, 0.7)' // Grün-Türkis für Gesamtscore
            ];
            const borderColors = [
                'rgba(75, 192, 192, 1)'
            ];

            aaqChartInstance = new Chart(ctx, {
                type: 'bar', // Balkendiagramm
                data: {
                    labels: ['Psychologische Flexibilität'],
                    datasets: [{
                        label: 'Dein Ergebnis',
                        data: [percentageScore], // Nur ein Wert für den Gesamtscore
                        backgroundColor: backgroundColors,
                        borderColor: borderColors,
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100, // Maximale Punktzahl ist 100%
                            title: {
                                display: true,
                                text: 'Anteil in % der maximalen Flexibilität'
                            }
                        },
                        x: {
                            grid: {
                                display: false
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: false // Legende ist bei nur einem Balken nicht nötig
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    let label = context.dataset.label || '';
                                    if (label) {
                                        label += ': ';
                                    }
                                    if (context.parsed.y !== null) {
                                        label += context.parsed.y.toFixed(1) + '%';
                                    }
                                    return label;
                                }
                            }
                        }
                    }
                }
            });
            // ----------- END: Chart.js Integration -----------

            // Autoscroll zum Ergebnis
            document.getElementById('result').scrollIntoView({ behavior: 'smooth', block: 'start' });
        }
    </script>
</body>
</html>
