<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Akkzeptanz- und Handlungsfragebogen, AAQ-Rev-16</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* Allgemeine Einstellungen für den Body */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 40px 20px;
            background-color: #f0f2f5;
            color: #333;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
        }
        /* Container für den gesamten Test, um ihn zu zentrieren und zu stylen */
        .container {
            background-color: #ffffff;
            padding: 40px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            max-width: 900px; /* Breite auf 900px geändert */
            width: 100%;
            box-sizing: border-box;
        }
        h1 {
            color: #0056b3;
            text-align: center;
            margin-bottom: 30px;
        }
        /* Style für die einzelnen Fragenblöcke */
        .question-block {
            margin-bottom: 25px;
            padding: 15px 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
            background-color: #f9f9f9;
        }
        .question-block p {
            font-weight: bold;
            margin-bottom: 15px;
            color: #444;
        }
        /* Styling für Radio-Button-Labels, um sie anklickbar zu machen */
        .options-group label {
            display: block; /* Jedes Label in eine neue Zeile */
            margin-bottom: 8px;
            cursor: pointer;
            padding: 5px 0;
            border-radius: 5px;
            transition: background-color 0.2s ease;
        }
        .options-group label:hover {
            background-color: #eef;
        }
        .options-group input[type="radio"] {
            margin-right: 10px;
            accent-color: #007bff; /* Farbe des Radio-Buttons */
        }
        /* Button Styling */
        button {
            display: block;
            width: fit-content;
            margin: 30px auto 0 auto;
            padding: 12px 25px;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 1.1em;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.2s ease;
            box-shadow: 0 2px 5px rgba(0, 123, 255, 0.3);
        }
        button:hover {
            background-color: #0056b3;
            transform: translateY(-2px);
        }
        button:active {
            transform: translateY(0);
        }
        button:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
            box-shadow: none;
            transform: none;
        }
        /* Ergebnisbereich */
        #result {
            margin-top: 40px;
            padding: 30px;
            border-radius: 10px;
            background-color: #e0f7fa; /* Hellblau für Erfolg */
            border: 1px solid #b2ebf2;
            color: #006064;
            text-align: center;
            display: none; /* Standardmäßig versteckt */
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
        }
        #result h2 {
            color: #0056b3;
            margin-bottom: 20px;
        }
        #result p {
            font-size: 1.1em;
            line-height: 1.7;
            margin-bottom: 10px;
            text-align: left; /* Textausrichtung im Ergebnisbereich */
        }
        #result strong {
            color: #333;
        }
        /* Chart Styling */
        .chart-container {
            width: 100%;
            max-width: 500px; /* Breite des Diagramms */
            margin: 30px auto 0 auto;
            background-color: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.08);
            border: 1px solid #eee;
        }

        /* Einleitungskasten Styling (neu hinzugefügt) */
        .introduction-box {
            max-width: 800px; /* Etwas schmaler als der Gesamtcontainer für besseren Lesefluss */
            margin: 0 auto 30px auto; /* Zentriert die Box und gibt Abstand nach unten */
            background-color: #f0f8ff; /* Hintergrundfarbe */
            border: 1px solid #cceeff; /* Randfarbe */
            border-radius: 12px;
            padding: 25px 30px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
            overflow: hidden;
            text-align: left; /* Textausrichtung im Kasten */
        }
        
        .introduction-box p {
            font-size: 1.1em;
            color: #444;
            margin-bottom: 15px;
            line-height: 1.7;
        }
        .introduction-box p:first-of-type {
            text-align: center; /* Erster Absatz zentriert */
            margin-bottom: 25px;
            font-weight: 600;
        }
        .introduction-box ul {
            list-style-type: disc;
            padding-left: 20px;
            margin: 15px 0 25px 0;
        }
        .introduction-box ul li {
            font-size: 1.05em;
            color: #444;
            margin-bottom: 8px;
            line-height: 1.5;
        }

        /* Responsivität */
        @media (max-width: 768px) {
            body {
                padding: 20px 10px;
            }
            .container {
                padding: 25px;
            }
            h1 {
                font-size: 1.8em;
            }
            .question-block {
                padding: 10px;
            }
            .options-group label {
                font-size: 0.95em;
            }
            button {
                padding: 10px 20px;
                font-size: 1em;
            }
            .introduction-box {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Akzeptanz- und Handlungsfragebogen (AAQ-Rev-16)</h1>

        <div class="introduction-box">
            <p>Dieser Fragebogen dient dazu, Ihre psychologische Flexibilität zu erfassen.</p>
            <p>Psychologische Flexibilität ist die Fähigkeit, in Kontakt mit dem gegenwärtigen Moment zu treten und sich selbst als Kontext wahrzunehmen, um dann im Einklang mit den eigenen Werten zu handeln, selbst wenn unangenehme Gedanken, Gefühle oder körperliche Empfindungen vorhanden sind.</p>
            <p>Bedenken Sie, dass dieser Test eine vereinfachte Momentaufnahme ist und nicht die volle Komplexität Ihrer Persönlichkeit abbilden kann. Er dient als nützliche Orientierungshilfe und gibt eine Übersicht der physiologischen Flexibilität.</p>
            <p>Bitte wählen Sie eine zutreffende Aussage mit dem jeweiligen Button.</p>
            <ul>
                <li><strong>1 = Trifft nie zu</strong></li>
                <li><strong>2 = Trifft sehr selten zu</strong></li>
                <li><strong>3 = Trifft selten zu</strong></li>
                <li><strong>4 = Manchmal</strong></li>
                <li><strong>5 = Trifft oft zu</strong></li>
                <li><strong>6 = Trifft sehr oft zu</strong></li>
                <li><strong>7 = Trifft immer zu</strong></li>
            </ul>
            <p style="text-align: center; margin-top: 20px; font-weight: 600;">Es werden keine Daten gespeichert und ist 100% anonym.</p>
        </div>

        <form id="quizForm">
            <div class="question-block">
                <p>1. Meine unangenehmen Gedanken und Gefühle können mich nicht davon abhalten, das zu tun, was mir wichtig ist.</p>
                <div class="options-group">
                    <label><input type="radio" name="q1" value="1"> 1 = Trifft nie zu</label>
                    <label><input type="radio" name="q1" value="2"> 2 = Trifft sehr selten zu</label>
                    <label><input type="radio" name="q1" value="3"> 3 = Trifft selten zu</label>
                    <label><input type="radio" name="q1" value="4"> 4 = Manchmal</label>
                    <label><input type="radio" name="q1" value="5"> 5 = Trifft oft zu</label>
                    <label><input type="radio" name="q1" value="6"> 6 = Trifft sehr oft zu</label>
                    <label><input type="radio" name="q1" value="7"> 7 = Trifft immer zu</label>
                </div>
            </div>

            <div class="question-block">
                <p>2. Ich muss meine Emotionen kontrollieren, bevor ich handeln kann.</p>
                <div class="options-group">
                    <label><input type="radio" name="q2" value="1"> 1 = Trifft nie zu</label>
                    <label><input type="radio" name="q2" value="2"> 2 = Trifft sehr selten zu</label>
                    <label><input type="radio" name="q2" value="3"> 3 = Trifft selten zu</label>
                    <label><input type="radio" name="q2" value="4"> 4 = Manchmal</label>
                    <label><input type="radio" name="q2" value="5"> 5 = Trifft oft zu</label>
                    <label><input type="radio" name="q2" value="6"> 6 = Trifft sehr oft zu</label>
                    <label><input type="radio" name="q2" value="7"> 7 = Trifft immer zu</label>
                </div>
            </div>

            <div class="question-block">
                <p>3. Ich bin bereit, unangenehme Gefühle zu erleben, wenn ich etwas tun will, das mir wichtig ist.</p>
                <div class="options-group">
                    <label><input type="radio" name="q3" value="1"> 1 = Trifft nie zu</label>
                    <label><input type="radio" name="q3" value="2"> 2 = Trifft sehr selten zu</label>
                    <label><input type="radio" name="q3" value="3"> 3 = Trifft selten zu</label>
                    <label><input type="radio" name="q3" value="4"> 4 = Manchmal</label>
                    <label><input type="radio" name="q3" value="5"> 5 = Trifft oft zu</label>
                    <label><input type="radio" name="q3" value="6"> 6 = Trifft sehr oft zu</label>
                    <label><input type="radio" name="q3" value="7"> 7 = Trifft immer zu</label>
                </div>
            </div>

            <div class="question-block">
                <p>4. Schmerzhafte Erinnerungen lassen es nicht zu, dass ich ein erfülltes Leben führe.</p>
                <div class="options-group">
                    <label><input type="radio" name="q4" value="1"> 1 = Trifft nie zu</label>
                    <label><input type="radio" name="q4" value="2"> 2 = Trifft sehr selten zu</label>
                    <label><input type="radio" name="q4" value="3"> 3 = Trifft selten zu</label>
                    <label><input type="radio" name="q4" value="4"> 4 = Manchmal</label>
                    <label><input type="radio" name="q4" value="5"> 5 = Trifft oft zu</label>
                    <label><input type="radio" name="q4" value="6"> 6 = Trifft sehr oft zu</label>
                    <label><input type="radio" name="q4" value="7"> 7 = Trifft immer zu</label>
                </div>
            </div>

            <div class="question-block">
                <p>5. Ich mache mir Sorgen darüber, was andere Leute über mich denken.</p>
                <div class="options-group">
                    <label><input type="radio" name="q5" value="1"> 1 = Trifft nie zu</label>
                    <label><input type="radio" name="q5" value="2"> 2 = Trifft sehr selten zu</label>
                    <label><input type="radio" name="q5" value="3"> 3 = Trifft selten zu</label>
                    <label><input type="radio" name="q5" value="4"> 4 = Manchmal</label>
                    <label><input type="radio" name="q5" value="5"> 5 = Trifft oft zu</label>
                    <label><input type="radio" name="q5" value="6"> 6 = Trifft sehr oft zu</label>
                    <label><input type="radio" name="q5" value="7"> 7 = Trifft immer zu</label>
                </div>
            </div>

            <div class="question-block">
                <p>6. Ich habe Angst davor, dass meine Gefühle außer Kontrolle geraten könnten.</p>
                <div class="options-group">
                    <label><input type="radio" name="q6" value="1"> 1 = Trifft nie zu</label>
                    <label><input type="radio" name="q6" value="2"> 2 = Trifft sehr selten zu</label>
                    <label><input type="radio" name="q6" value="3"> 3 = Trifft selten zu</label>
                    <label><input type="radio" name="q6" value="4"> 4 = Manchmal</label>
                    <label><input type="radio" name="q6" value="5"> 5 = Trifft oft zu</label>
                    <label><input type="radio" name="q6" value="6"> 6 = Trifft sehr oft zu</label>
                    <label><input type="radio" name="q6" value="7"> 7 = Trifft immer zu</label>
                </div>
            </div>

            <div class="question-block">
                <p>7. Ich befürchte, dass ich meine Gefühle nicht ertragen kann.</p>
                <div class="options-group">
                    <label><input type="radio" name="q7" value="1"> 1 = Trifft nie zu</label>
                    <label><input type="radio" name="q7" value="2"> 2 = Trifft sehr selten zu</label>
                    <label><input type="radio" name="q7" value="3"> 3 = Trifft selten zu</label>
                    <label><input type="radio" name="q7" value="4"> 4 = Manchmal</label>
                    <label><input type="radio" name="q7" value="5"> 5 = Trifft oft zu</label>
                    <label><input type="radio" name="q7" value="6"> 6 = Trifft sehr oft zu</label>
                    <label><input type="radio" name="q7" value="7"> 7 = Trifft immer zu</label>
                </div>
            </div>

            <div class="question-block">
                <p>8. Wenn ich meine Gefühle kontrollieren könnte, könnte ich besser leben.</p>
                <div class="options-group">
                    <label><input type="radio" name="q8" value="1"> 1 = Trifft nie zu</label>
                    <label><input type="radio" name="q8" value="2"> 2 = Trifft sehr selten zu</label>
                    <label><input type="radio" name="q8" value="3"> 3 = Trifft selten zu</label>
                    <label><input type="radio" name="q8" value="4"> 4 = Manchmal</label>
                    <label><input type="radio" name="q8" value="5"> 5 = Trifft oft zu</label>
                    <label><input type="radio" name="q8" value="6"> 6 = Trifft sehr oft zu</label>
                    <label><input type="radio" name="q8" value="7"> 7 = Trifft immer zu</label>
                </div>
            </div>

            <div class="question-block">
                <p>9. Ich fühle mich durch meine Gefühle eingeschränkt.</p>
                <div class="options-group">
                    <label><input type="radio" name="q9" value="1"> 1 = Trifft nie zu</label>
                    <label><input type="radio" name="q9" value="2"> 2 = Trifft sehr selten zu</label>
                    <label><input type="radio" name="q9" value="3"> 3 = Trifft selten zu</label>
                    <label><input type="radio" name="q9" value="4"> 4 = Manchmal</label>
                    <label><input type="radio" name="q9" value="5"> 5 = Trifft oft zu</label>
                    <label><input type="radio" name="q9" value="6"> 6 = Trifft sehr oft zu</label>
                    <label><input type="radio" name="q9" value="7"> 7 = Trifft immer zu</label>
                </div>
            </div>

            <div class="question-block">
                <p>10. Ich bin bereit, unangenehme Gefühle zu haben, um ein sinnvolles Leben zu führen.</p>
                <div class="options-group">
                    <label><input type="radio" name="q10" value="1"> 1 = Trifft nie zu</label>
                    <label><input type="radio" name="q10" value="2"> 2 = Trifft sehr selten zu</label>
                    <label><input type="radio" name="q10" value="3"> 3 = Trifft selten zu</label>
                    <label><input type="radio" name="q10" value="4"> 4 = Manchmal</label>
                    <label><input type="radio" name="q10" value="5"> 5 = Trifft oft zu</label>
                    <label><input type="radio" name="q10" value="6"> 6 = Trifft sehr oft zu</label>
                    <label><input type="radio" name="q10" value="7"> 7 = Trifft immer zu</label>
                </div>
            </div>

            <div class="question-block">
                <p>11. Schmerzhafte Erinnerungen beherrschen mein Leben.</p>
                <div class="options-group">
                    <label><input type="radio" name="q11" value="1"> 1 = Trifft nie zu</label>
                    <label><input type="radio" name="q11" value="2"> 2 = Trifft sehr selten zu</label>
                    <label><input type="radio" name="q11" value="3"> 3 = Trifft selten zu</label>
                    <label><input type="radio" name="q11" value="4"> 4 = Manchmal</label>
                    <label><input type="radio" name="q11" value="5"> 5 = Trifft oft zu</label>
                    <label><input type="radio" name="q11" value="6"> 6 = Trifft sehr oft zu</label>
                    <label><input type="radio" name="q11" value="7"> 7 = Trifft immer zu</label>
                </div>
            </div>

            <div class="question-block">
                <p>12. Wenn ich meine Emotionen nicht unter Kontrolle habe, kann ich nicht produktiv sein.</p>
                <div class="options-group">
                    <label><input type="radio" name="q12" value="1"> 1 = Trifft nie zu</label>
                    <label><input type="radio" name="q12" value="2"> 2 = Trifft sehr selten zu</label>
                    <label><input type="radio" name="q12" value="3"> 3 = Trifft selten zu</label>
                    <label><input type="radio" name="q12" value="4"> 4 = Manchmal</label>
                    <label><input type="radio" name="q12" value="5"> 5 = Trifft oft zu</label>
                    <label><input type="radio" name="q12" value="6"> 6 = Trifft sehr oft zu</label>
                    <label><input type="radio" name="q12" value="7"> 7 = Trifft immer zu</label>
                </div>
            </div>

            <div class="question-block">
                <p>13. Wenn ich mich nicht wohlfühle, kann ich die wichtigen Dinge in meinem Leben nicht tun.</p>
                <div class="options-group">
                    <label><input type="radio" name="q13" value="1"> 1 = Trifft nie zu</label>
                    <label><input type="radio" name="q13" value="2"> 2 = Trifft sehr selten zu</label>
                    <label><input type="radio" name="q13" value="3"> 3 = Trifft selten zu</label>
                    <label><input type="radio" name="q13" value="4"> 4 = Manchmal</label>
                    <label><input type="radio" name="q13" value="5"> 5 = Trifft oft zu</label>
                    <label><input type="radio" name="q13" value="6"> 6 = Trifft sehr oft zu</label>
                    <label><input type="radio" name="q13" value="7"> 7 = Trifft immer zu</label>
                </div>
            </div>

            <div class="question-block">
                <p>14. Ich bin in der Lage, ein sinnvolles Leben zu führen, auch wenn ich Schmerzen habe.</p>
                <div class="options-group">
                    <label><input type="radio" name="q14" value="1"> 1 = Trifft nie zu</label>
                    <label><input type="radio" name="q14" value="2"> 2 = Trifft sehr selten zu</label>
                    <label><input type="radio" name="q14" value="3"> 3 = Trifft selten zu</label>
                    <label><input type="radio" name="q14" value="4"> 4 = Manchmal</label>
                    <label><input type="radio" name="q14" value="5"> 5 = Trifft oft zu</label>
                    <label><input type="radio" name="q14" value="6"> 6 = Trifft sehr oft zu</label>
                    <label><input type="radio" name="q14" value="7"> 7 = Trifft immer zu</label>
                </div>
            </div>

            <div class="question-block">
                <p>15. Es ist in Ordnung, meine Gedanken und Gefühle zu haben, auch wenn sie unangenehm sind.</p>
                <div class="options-group">
                    <label><input type="radio" name="q15" value="1"> 1 = Trifft nie zu</label>
                    <label><input type="radio" name="q15" value="2"> 2 = Trifft sehr selten zu</label>
                    <label><input type="radio" name="q15" value="3"> 3 = Trifft selten zu</label>
                    <label><input type="radio" name="q15" value="4"> 4 = Manchmal</label>
                    <label><input type="radio" name="q15" value="5"> 5 = Trifft oft zu</label>
                    <label><input type="radio" name="q15" value="6"> 6 = Trifft sehr oft zu</label>
                    <label><input type="radio" name="q15" value="7"> 7 = Trifft immer zu</label>
                </div>
            </div>

            <div class="question-block">
                <p>16. Ich kann meine Gefühle nicht beeinflussen.</p>
                <div class="options-group">
                    <label><input type="radio" name="q16" value="1"> 1 = Trifft nie zu</label>
                    <label><input type="radio" name="q16" value="2"> 2 = Trifft sehr selten zu</label>
                    <label><input type="radio" name="q16" value="3"> 3 = Trifft selten zu</label>
                    <label><input type="radio" name="q16" value="4"> 4 = Manchmal</label>
                    <label><input type="radio" name="q16" value="5"> 5 = Trifft oft zu</label>
                    <label><input type="radio" name="q16" value="6"> 6 = Trifft sehr oft zu</label>
                    <label><input type="radio" name="q16" value="7"> 7 = Trifft immer zu</label>
                </div>
            </div>

            <button type="submit" id="submitBtn">Ergebnis anzeigen</button>
        </form>

        <div id="result">
            <h2>Ihr Ergebnis des AAQ-Rev-16</h2>
            <div id="result-text">
                </div>
            <div class="chart-container">
                <h3>Ihre psychologische Flexibilität</h3>
                <canvas id="resultChart"></canvas>
            </div>
            <button id="restartTestBtn">Test wiederholen</button>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const quizForm = document.getElementById('quizForm');
            const submitBtn = document.getElementById('submitBtn');
            const resultDiv = document.getElementById('result');
            const resultTextDiv = document.getElementById('result-text');
            const restartTestBtn = document.getElementById('restartTestBtn');
            let myChartInstance = null; // Variable, um das Chart-Objekt zu speichern

            // Fragen, die umgekehrt bewertet werden müssen (q2, q4, q5, q6, q7, q8, q9, q11, q12, q13, q16)
            const reverseScoredQuestions = [2, 4, 5, 6, 7, 8, 9, 11, 12, 13, 16]; // Basierend auf den Fragentiteln (1-basiert)

            // Event Listener für den Submit-Button
            submitBtn.addEventListener('click', function(event) {
                event.preventDefault(); // Verhindert das Standard-Formular-Submit

                const formData = new FormData(quizForm);
                let totalScore = 0;
                let allQuestionsAnswered = true;

                for (let i = 1; i <= 16; i++) {
                    const questionName = `q${i}`;
                    const selectedValue = formData.get(questionName);

                    if (selectedValue === null) {
                        allQuestionsAnswered = false;
                        break; // Eine Frage wurde nicht beantwortet
                    }

                    let score = parseInt(selectedValue);

                    // Überprüfen, ob die Frage umgekehrt bewertet werden muss
                    if (reverseScoredQuestions.includes(i)) {
                        score = 8 - score; // Skala von 1-7, also 8-Wert für umgekehrte Punktzahl
                    }
                    totalScore += score;
                }

                if (!allQuestionsAnswered) {
                    alert('Bitte beantworten Sie alle Fragen, bevor Sie das Ergebnis anzeigen.');
                    return;
                }

                // Ergebnis-Interpretation
                let resultInterpretation = '';
                if (totalScore >= 0 && totalScore <= 28) {
                    resultInterpretation = `
                        <p>Ihr Gesamtpunktwert ist <strong>${totalScore}</strong> von maximal 112.</p>
                        <p>Ein Wert im Bereich von <strong>0-28 deutet auf eine geringe psychologische Flexibilität hin.</strong></p>
                        <p>Dies kann bedeuten, dass Sie möglicherweise Schwierigkeiten haben, mit unangenehmen Gedanken und Gefühlen umzugehen. Dies kann zu Vermeidungsverhalten führen und Sie daran hindern, ein Leben im Einklang mit Ihren Werten zu führen.</p>
                        <p>Es könnte hilfreich sein, Strategien zu erlernen, um Ihre Gedanken und Gefühle zu akzeptieren und dennoch werteorientiert zu handeln. Achtsamkeitsübungen und Techniken der kognitiven Umstrukturierung können hierbei unterstützend wirken.</p>
                    `;
                } else if (totalScore >= 29 && totalScore <= 42) {
                    resultInterpretation = `
                        <p>Ihr Gesamtpunktwert ist <strong>${totalScore}</strong> von maximal 112.</p>
                        <p>Ein Wert im Bereich von <strong>29-42 deutet auf eine moderate psychologische Flexibilität hin.</strong></p>
                        <p>Sie zeigen bereits eine gewisse Fähigkeit, mit unangenehmen Erfahrungen umzugehen, aber es gibt noch Raum für Wachstum. Es kann Situationen geben, in denen Sie sich von Ihren Gedanken und Gefühlen leiten lassen und dadurch von Ihren Zielen abweichen.</p>
                        <p>Weiteres Training in Akzeptanz- und Achtsamkeitsstrategien kann Ihnen helfen, Ihre psychologische Flexibilität weiter zu stärken und ein noch erfüllteres Leben zu führen.</p>
                    `;
                } else { // totalScore >= 43 && totalScore <= 112
                    resultInterpretation = `
                        <p>Ihr Gesamtpunktwert ist <strong>${totalScore}</strong> von maximal 112.</p>
                        <p>Ein Wert im Bereich von <strong>43-112 deutet auf eine hohe psychologische Flexibilität hin.</strong></p>
                        <p>Sie sind gut in der Lage, sich von unangenehmen Gedanken und Gefühlen nicht einschränken zu lassen und können auch unter schwierigen Umständen werteorientiert handeln. Dies ermöglicht Ihnen ein flexibles und effektives Reagieren auf Herausforderungen.</p>
                        <p>Ihre Fähigkeit zur Akzeptanz und zum werteorientierten Handeln ist eine wertvolle Ressource, die Sie weiterhin pflegen und nutzen können, um Ihre Lebensqualität zu optimieren.</p>
                    `;
                }

                resultTextDiv.innerHTML = resultInterpretation;
                quizForm.style.display = 'none'; // Verstecke das Quiz
                submitBtn.style.display = 'none'; // Verstecke den Submit-Button
                resultDiv.style.display = 'block'; // Zeige das Ergebnis an

                renderChart(totalScore); // Diagramm rendern

                // Autoscroll zum Ergebnis
                resultDiv.scrollIntoView({ behavior: 'smooth', block: 'start' });
            });

            // Funktion zum Rendern des Charts
            function renderChart(score) {
                const ctx = document.getElementById('resultChart').getContext('2d');

                // Zerstöre das alte Chart, falls es existiert
                if (myChartInstance) {
                    myChartInstance.destroy();
                }

                let barColor;
                if (score <= 28) {
                    barColor = 'rgba(231, 76, 60, 0.8)'; // Rot für gering
                } else if (score <= 42) {
                    barColor = 'rgba(241, 196, 15, 0.8)'; // Gelb für moderat
                } else {
                    barColor = 'rgba(46, 204, 113, 0.8)'; // Grün für hoch
                }

                myChartInstance = new Chart(ctx, {
                    type: 'bar', // Balkendiagramm für den einzelnen Score
                    data: {
                        labels: ['Ihr Score'],
                        datasets: [{
                            label: 'Psychologische Flexibilität',
                            data: [score],
                            backgroundColor: barColor,
                            borderColor: barColor.replace('0.8)', '1)'),
                            borderWidth: 1
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            y: {
                                beginAtZero: true,
                                max: 112, // Maximal möglicher Score (16 Fragen * 7 Punkte)
                                ticks: {
                                    precision: 0
                                },
                                title: {
                                    display: true,
                                    text: 'Gesamtpunktwert'
                                }
                            },
                            x: {
                                grid: {
                                    display: false
                                }
                            }
                        },
                        plugins: {
                            legend: {
                                display: false
                            },
                            title: {
                                display: true,
                                text: 'Ihr Gesamtpunktwert im AAQ-Rev-16',
                                font: {
                                    size: 16
                                }
                            },
                            tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        let label = context.dataset.label || '';
                                        if (label) {
                                            label += ': ';
                                        }
                                        if (context.parsed.y !== null) {
                                            label += context.parsed.y + ' Punkte';
                                        }
                                        return label;
                                    }
                                }
                            }
                        }
                    }
                });
            }

            // Event Listener für den "Test wiederholen"-Button
            restartTestBtn.addEventListener('click', function() {
                // Chart zerstören, um Speicherlecks zu vermeiden
                if (myChartInstance) {
                    myChartInstance.destroy();
                    myChartInstance = null;
                }

                quizForm.reset(); // Formular zurücksetzen
                resultDiv.style.display = 'none'; // Ergebnisbereich verstecken
                quizForm.style.display = 'block'; // Fragen wieder anzeigen
                submitBtn.style.display = 'block'; // Submit-Button wieder anzeigen
                submitBtn.disabled = true; // Submit-Button deaktivieren bis alle Fragen beantwortet sind

                // Scroll zum Anfang des Formulars
                quizForm.scrollIntoView({ behavior: 'smooth', block: 'start' });
            });

            // Funktion zur Überprüfung, ob alle Fragen beantwortet sind, um den Submit-Button zu aktivieren
            function checkAllQuestionsAnswered() {
                const totalQuestions = 16;
                let answeredQuestions = 0;
                for (let i = 1; i <= totalQuestions; i++) {
                    const questionName = `q${i}`;
                    const radios = document.querySelectorAll(`input[name="${questionName}"]:checked`);
                    if (radios.length > 0) {
                        answeredQuestions++;
                    }
                }
                submitBtn.disabled = (answeredQuestions !== totalQuestions);
            }

            // Listener für alle Radio-Buttons, um den Status des Submit-Buttons zu aktualisieren
            quizForm.querySelectorAll('input[type="radio"]').forEach(radio => {
                radio.addEventListener('change', checkAllQuestionsAnswered);
            });

            // Initialer Check beim Laden der Seite
            checkAllQuestionsAnswered();
        });
    </script>
</body>
</html>
