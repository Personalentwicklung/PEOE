<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Akzeptanz- und Handlungsfragebogen, AAQ-Rev-16</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* Allgemeine Einstellungen für den Body */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 40px 20px;
            background-color: #f0f2f5;
            color: #333;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
        }
        /* Container für den gesamten Test, um ihn zu zentrieren und zu stylen */
        .container {
            background-color: #ffffff;
            padding: 40px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            max-width: 900px; /* Angepasst auf 900px, wie gewünscht */
            width: 100%;
            box-sizing: border-box;
            margin-bottom: 20px; /* Abstand nach unten für mobiles Scrolling */
        }
        h1 {
            color: #0056b3;
            text-align: center;
            margin-bottom: 30px;
            font-size: 2.2em;
        }
        h2 {
            color: #0056b3;
            text-align: center;
            margin-top: 30px;
            margin-bottom: 20px;
            font-size: 1.8em;
        }
        h3 {
            color: #0056b3;
            margin-bottom: 15px;
            font-size: 1.4em;
        }
        p {
            line-height: 1.7;
            margin-bottom: 15px;
        }
        /* Styling für die Anweisungen vor dem Test */
        .instructions {
            background-color: #e6f7ff;
            border-left: 5px solid #2196f3;
            padding: 20px;
            margin-bottom: 30px;
            border-radius: 8px;
            font-size: 1.1em;
            color: #0d47a1;
            text-align: left;
        }
        .instructions p {
            margin-bottom: 10px;
        }
        .instructions strong {
            color: #0056b3;
        }
        .instructions ul {
            list-style-type: disc;
            padding-left: 25px;
            margin-top: 10px;
        }
        .instructions li {
            margin-bottom: 5px;
        }

        /* Styling für Fragen */
        .question-block {
            background-color: #f9f9f9;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            text-align: left;
        }
        .question-block p {
            font-weight: 600;
            margin-bottom: 15px;
            color: #555;
            font-size: 1.1em;
        }

        /* Styling für Radio-Button-Gruppen */
        .options-group label {
            display: block;
            background-color: #ffffff;
            padding: 10px 15px;
            margin-bottom: 8px;
            border: 1px solid #eee;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.2s ease, border-color 0.2s ease;
        }
        .options-group label:hover {
            background-color: #f0f8ff;
            border-color: #a3d3ff;
        }
        .options-group input[type="radio"] {
            margin-right: 10px;
            transform: scale(1.1); /* Slightly larger radio buttons */
            accent-color: #007bff; /* Custom color for radio button */
        }
        .options-group span {
            font-size: 0.95em;
            color: #666;
        }

        /* Buttons Styling */
        .button-group {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }
        .button-group button {
            background-color: #007bff;
            color: white;
            padding: 12px 25px;
            border: none;
            border-radius: 5px;
            font-size: 1em;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        .button-group button:hover {
            background-color: #0056b3;
        }
        .button-group button:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
        }

        /* Ergebnisbereich */
        #result-section {
            display: none; /* Standardmäßig ausgeblendet */
            margin-top: 40px;
            padding: 30px;
            border-radius: 10px;
            background-color: #e0f7fa; /* Hellblau für Erfolg */
            border: 1px solid #b2ebf2;
            color: #006064;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
            font-size: 1.1em;
            line-height: 1.8;
            text-align: center;
        }
        #result-section h2 {
            color: #0056b3;
            margin-bottom: 20px;
        }
        #result-section p {
            margin-bottom: 10px;
            text-align: left;
        }
        #result-section strong {
            color: #333;
        }

        /* Chart Styling */
        .chart-container {
            width: 100%;
            max-width: 600px;
            margin: 30px auto 0 auto;
            background-color: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.08);
            border: 1px solid #eee;
        }
        .chart-container canvas {
            max-height: 400px;
        }

        /* Restart Button Styling */
        #restart-button {
            background-color: #6c757d;
            color: white;
            padding: 12px 25px;
            border: none;
            border-radius: 5px;
            font-size: 1.1em;
            cursor: pointer;
            transition: background-color 0.3s ease;
            margin-top: 40px;
            display: block;
            width: fit-content;
            margin-left: auto;
            margin-right: auto;
        }
        #restart-button:hover {
            background-color: #5a6268;
        }

        /* Responsivität */
        @media (max-width: 768px) {
            body {
                padding: 20px 10px;
            }
            .container {
                padding: 25px;
            }
            h1 {
                font-size: 1.8em;
            }
            h2 {
                font-size: 1.5em;
            }
            .question-block {
                padding: 15px;
            }
            .options-group label {
                padding: 8px 10px;
            }
            .button-group button {
                padding: 10px 20px;
                font-size: 0.9em;
            }
            .chart-container {
                padding: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div id="intro-section">
            <h1>Akzeptanz- und Handlungsfragebogen (AAQ-Rev-16)</h1>
            <div class="instructions">
                <p>Der Akzeptanz- und Handlungsfragebogen (AAQ-Rev-16) dient dazu, Ihre psychologische Flexibilität zu erfassen. Psychologische Flexibilität ist die Fähigkeit, in Kontakt mit dem gegenwärtigen Moment zu treten und sich selbst als Kontext wahrzunehmen, um dann im Einklang mit den eigenen Werten zu handeln, selbst wenn unangenehme Gedanken, Gefühle oder körperliche Empfindungen vorhanden sind.</p>
                <p>Bitte bewerten Sie die folgenden 16 Aussagen danach, wie sehr sie auf Sie zutreffen. Es gibt keine "richtigen" oder "falschen" Antworten. Seien Sie ehrlich zu sich selbst, um ein aussagekräftiges Ergebnis zu erhalten.</p>
                <p>Verwenden Sie die folgende Skala:</p>
                <ul>
                    <li><strong>1 = Trifft nie zu</strong></li>
                    <li><strong>2 = Trifft sehr selten zu</strong></li>
                    <li><strong>3 = Trifft selten zu</strong></li>
                    <li><strong>4 = Manchmal</strong></li>
                    <li><strong>5 = Trifft oft zu</strong></li>
                    <li><strong>6 = Trifft sehr oft zu</strong></li>
                    <li><strong>7 = Trifft immer zu</strong></li>
                </ul>
                <p>Ihre Antworten werden nicht gespeichert und sind 100% anonym.</p>
            </div>
            <div style="text-align: center;">
                <button id="start-test-button" class="button-group button">Test starten</button>
            </div>
        </div>

        <div id="quiz-section" style="display: none;">
            <h2 id="question-counter">Frage 1 von 16</h2>
            <div id="question-display" class="question-block">
                </div>
            <div class="button-group">
                <button id="prev-button" disabled>Zurück</button>
                <button id="next-button">Nächste Frage</button>
                <button id="submit-button" style="display: none;">Ergebnis anzeigen</button>
            </div>
        </div>

        <div id="result-section">
            <h2>Ihr Ergebnis des AAQ-Rev-16</h2>
            <div id="result-text">
                </div>
            <div class="chart-container">
                <h3>Ihre psychologische Flexibilität</h3>
                <canvas id="resultChart"></canvas>
            </div>
            <button id="restart-button">Test wiederholen</button>
        </div>
    </div>

    <script>
        const questions = [
            {
                question: "1. Meine unangenehmen Gedanken und Gefühle können mich nicht davon abhalten, das zu tun, was mir wichtig ist.",
                options: {
                    1: "Trifft nie zu", 2: "Trifft sehr selten zu", 3: "Trifft selten zu", 4: "Manchmal", 5: "Trifft oft zu", 6: "Trifft sehr oft zu", 7: "Trifft immer zu"
                }
            },
            {
                question: "2. Ich muss meine Emotionen kontrollieren, bevor ich handeln kann.",
                options: {
                    1: "Trifft nie zu", 2: "Trifft sehr selten zu", 3: "Trifft selten zu", 4: "Manchmal", 5: "Trifft oft zu", 6: "Trifft sehr oft zu", 7: "Trifft immer zu"
                },
                reverseScore: true
            },
            {
                question: "3. Ich bin bereit, unangenehme Gefühle zu erleben, wenn ich etwas tun will, das mir wichtig ist.",
                options: {
                    1: "Trifft nie zu", 2: "Trifft sehr selten zu", 3: "Trifft selten zu", 4: "Manchmal", 5: "Trifft oft zu", 6: "Trifft sehr oft zu", 7: "Trifft immer zu"
                }
            },
            {
                question: "4. Schmerzhafte Erinnerungen lassen es nicht zu, dass ich ein erfülltes Leben führe.",
                options: {
                    1: "Trifft nie zu", 2: "Trifft sehr selten zu", 3: "Trifft selten zu", 4: "Manchmal", 5: "Trifft oft zu", 6: "Trifft sehr oft zu", 7: "Trifft immer zu"
                },
                reverseScore: true
            },
            {
                question: "5. Ich mache mir Sorgen darüber, was andere Leute über mich denken.",
                options: {
                    1: "Trifft nie zu", 2: "Trifft sehr selten zu", 3: "Trifft selten zu", 4: "Manchmal", 5: "Trifft oft zu", 6: "Trifft sehr oft zu", 7: "Trifft immer zu"
                },
                reverseScore: true
            },
            {
                question: "6. Ich habe Angst davor, dass meine Gefühle außer Kontrolle geraten könnten.",
                options: {
                    1: "Trifft nie zu", 2: "Trifft sehr selten zu", 3: "Trifft selten zu", 4: "Manchmal", 5: "Trifft oft zu", 6: "Trifft sehr oft zu", 7: "Trifft immer zu"
                },
                reverseScore: true
            },
            {
                question: "7. Ich befürchte, dass ich meine Gefühle nicht ertragen kann.",
                options: {
                    1: "Trifft nie zu", 2: "Trifft sehr selten zu", 3: "Trifft selten zu", 4: "Manchmal", 5: "Trifft oft zu", 6: "Trifft sehr oft zu", 7: "Trifft immer zu"
                },
                reverseScore: true
            },
            {
                question: "8. Wenn ich meine Gefühle kontrollieren könnte, könnte ich besser leben.",
                options: {
                    1: "Trifft nie zu", 2: "Trifft sehr selten zu", 3: "Trifft selten zu", 4: "Manchmal", 5: "Trifft oft zu", 6: "Trifft sehr oft zu", 7: "Trifft immer zu"
                },
                reverseScore: true
            },
            {
                question: "9. Ich fühle mich durch meine Gefühle eingeschränkt.",
                options: {
                    1: "Trifft nie zu", 2: "Trifft sehr selten zu", 3: "Trifft selten zu", 4: "Manchmal", 5: "Trifft oft zu", 6: "Trifft sehr oft zu", 7: "Trifft immer zu"
                },
                reverseScore: true
            },
            {
                question: "10. Ich bin bereit, unangenehme Gefühle zu haben, um ein sinnvolles Leben zu führen.",
                options: {
                    1: "Trifft nie zu", 2: "Trifft sehr selten zu", 3: "Trifft selten zu", 4: "Manchmal", 5: "Trifft oft zu", 6: "Trifft sehr oft zu", 7: "Trifft immer zu"
                }
            },
            {
                question: "11. Schmerzhafte Erinnerungen beherrschen mein Leben.",
                options: {
                    1: "Trifft nie zu", 2: "Trifft sehr selten zu", 3: "Trifft selten zu", 4: "Manchmal", 5: "Trifft oft zu", 6: "Trifft sehr oft zu", 7: "Trifft immer zu"
                },
                reverseScore: true
            },
            {
                question: "12. Wenn ich meine Emotionen nicht unter Kontrolle habe, kann ich nicht produktiv sein.",
                options: {
                    1: "Trifft nie zu", 2: "Trifft sehr selten zu", 3: "Trifft selten zu", 4: "Manchmal", 5: "Trifft oft zu", 6: "Trifft sehr oft zu", 7: "Trifft immer zu"
                },
                reverseScore: true
            },
            {
                question: "13. Wenn ich mich nicht wohlfühle, kann ich die wichtigen Dinge in meinem Leben nicht tun.",
                options: {
                    1: "Trifft nie zu", 2: "Trifft sehr selten zu", 3: "Trifft selten zu", 4: "Manchmal", 5: "Trifft oft zu", 6: "Trifft sehr oft zu", 7: "Trifft immer zu"
                },
                reverseScore: true
            },
            {
                question: "14. Ich bin in der Lage, ein sinnvolles Leben zu führen, auch wenn ich Schmerzen habe.",
                options: {
                    1: "Trifft nie zu", 2: "Trifft sehr selten zu", 3: "Trifft selten zu", 4: "Manchmal", 5: "Trifft oft zu", 6: "Trifft sehr oft zu", 7: "Trifft immer zu"
                }
            },
            {
                question: "15. Es ist in Ordnung, meine Gedanken und Gefühle zu haben, auch wenn sie unangenehm sind.",
                options: {
                    1: "Trifft nie zu", 2: "Trifft sehr selten zu", 3: "Trifft selten zu", 4: "Manchmal", 5: "Trifft oft zu", 6: "Trifft sehr oft zu", 7: "Trifft immer zu"
                }
            },
            {
                question: "16. Ich kann meine Gefühle nicht beeinflussen.",
                options: {
                    1: "Trifft nie zu", 2: "Trifft sehr selten zu", 3: "Trifft selten zu", 4: "Manchmal", 5: "Trifft oft zu", 6: "Trifft sehr oft zu", 7: "Trifft immer zu"
                },
                reverseScore: true
            }
        ];

        let currentQuestionIndex = 0;
        let userAnswers = new Array(questions.length).fill(null);

        // DOM-Elemente
        const introSection = document.getElementById('intro-section');
        const quizSection = document.getElementById('quiz-section');
        const resultSection = document.getElementById('result-section');
        const startTestButton = document.getElementById('start-test-button');
        const questionCounter = document.getElementById('question-counter');
        const questionDisplay = document.getElementById('question-display');
        const prevButton = document.getElementById('prev-button');
        const nextButton = document.getElementById('next-button');
        const submitButton = document.getElementById('submit-button');
        const resultTextDiv = document.getElementById('result-text');
        const restartButton = document.getElementById('restart-button');
        let myChartInstance = null; // Für das Chart-Objekt

        // Event Listener
        startTestButton.addEventListener('click', startTest);
        nextButton.addEventListener('click', showNextQuestion);
        prevButton.addEventListener('click', showPreviousQuestion);
        submitButton.addEventListener('click', calculateResult);
        restartButton.addEventListener('click', restartTest);

        function startTest() {
            introSection.style.display = 'none';
            quizSection.style.display = 'block';
            currentQuestionIndex = 0;
            userAnswers.fill(null); // Antworten zurücksetzen
            renderQuestion();
            updateNavigationButtons();
        }

        function renderQuestion() {
            const q = questions[currentQuestionIndex];
            let optionsHtml = '';
            for (const value in q.options) {
                optionsHtml += `
                    <label>
                        <input type="radio" name="question-${currentQuestionIndex}" value="${value}" ${userAnswers[currentQuestionIndex] === value ? 'checked' : ''}>
                        ${value} = ${q.options[value]}
                    </label>
                `;
            }

            questionDisplay.innerHTML = `
                <p>${q.question}</p>
                <div class="options-group">
                    ${optionsHtml}
                </div>
            `;
            // Listener für Radio-Buttons hinzufügen
            document.querySelectorAll(`input[name="question-${currentQuestionIndex}"]`).forEach(radio => {
                radio.addEventListener('change', (event) => {
                    userAnswers[currentQuestionIndex] = event.target.value;
                    updateNavigationButtons(); // Buttons aktualisieren, falls Antwort ausgewählt wurde
                });
            });
            questionCounter.textContent = `Frage ${currentQuestionIndex + 1} von ${questions.length}`;
            updateNavigationButtons();
        }

        function updateNavigationButtons() {
            prevButton.disabled = currentQuestionIndex === 0;
            const currentAnswered = userAnswers[currentQuestionIndex] !== null;

            if (currentQuestionIndex === questions.length - 1) {
                nextButton.style.display = 'none';
                submitButton.style.display = currentAnswered ? 'inline-block' : 'none';
                submitButton.disabled = !currentAnswered;
            } else {
                nextButton.style.display = 'inline-block';
                submitButton.style.display = 'none';
                nextButton.disabled = !currentAnswered;
            }
        }

        function showNextQuestion() {
            if (userAnswers[currentQuestionIndex] === null) {
                alert("Bitte wählen Sie eine Antwort, bevor Sie fortfahren.");
                return;
            }
            currentQuestionIndex++;
            if (currentQuestionIndex < questions.length) {
                renderQuestion();
            }
        }

        function showPreviousQuestion() {
            currentQuestionIndex--;
            renderQuestion();
        }

        function calculateResult() {
            if (userAnswers.some(answer => answer === null)) {
                alert("Bitte beantworten Sie alle Fragen, bevor Sie das Ergebnis anzeigen.");
                return;
            }

            let totalScore = 0;
            userAnswers.forEach((answer, index) => {
                const question = questions[index];
                let score = parseInt(answer);
                if (question.reverseScore) {
                    score = 8 - score; // Skala von 1-7, also 8-Wert für umgekehrte Punktzahl
                }
                totalScore += score;
            });

            let resultInterpretation = '';
            let chartLabels = ['Geringe Flexibilität (0-28)', 'Moderate Flexibilität (29-42)', 'Hohe Flexibilität (43-112)'];
            let chartData = [0, 0, 0];
            let chartColors = ['#f44336', '#ffc107', '#4caf50']; // Rot, Gelb, Grün

            if (totalScore >= 0 && totalScore <= 28) {
                resultInterpretation = `
                    <p>Ihr Gesamtpunktwert ist <strong>${totalScore}</strong> von maximal 112.</p>
                    <p>Ein Wert im Bereich von <strong>0-28 deutet auf eine geringe psychologische Flexibilität hin.</strong></p>
                    <p>Dies kann bedeuten, dass Sie möglicherweise Schwierigkeiten haben, mit unangenehmen Gedanken und Gefühlen umzugehen. Dies kann zu Vermeidungsverhalten führen und Sie daran hindern, ein Leben im Einklang mit Ihren Werten zu führen.</p>
                    <p>Es könnte hilfreich sein, Strategien zu erlernen, um Ihre Gedanken und Gefühle zu akzeptieren und dennoch werteorientiert zu handeln. Achtsamkeitsübungen und Techniken der kognitiven Umstrukturierung können hierbei unterstützend wirken.</p>
                `;
                chartData = [totalScore, 0, 0];
            } else if (totalScore >= 29 && totalScore <= 42) {
                resultInterpretation = `
                    <p>Ihr Gesamtpunktwert ist <strong>${totalScore}</strong> von maximal 112.</p>
                    <p>Ein Wert im Bereich von <strong>29-42 deutet auf eine moderate psychologische Flexibilität hin.</strong></p>
                    <p>Sie zeigen bereits eine gewisse Fähigkeit, mit unangenehmen Erfahrungen umzugehen, aber es gibt noch Raum für Wachstum. Es kann Situationen geben, in denen Sie sich von Ihren Gedanken und Gefühlen leiten lassen und dadurch von Ihren Zielen abweichen.</p>
                    <p>Weiteres Training in Akzeptanz- und Achtsamkeitsstrategien kann Ihnen helfen, Ihre psychologische Flexibilität weiter zu stärken und ein noch erfüllteres Leben zu führen.</p>
                `;
                chartData = [0, totalScore, 0];
            } else { // totalScore >= 43 && totalScore <= 112
                resultInterpretation = `
                    <p>Ihr Gesamtpunktwert ist <strong>${totalScore}</strong> von maximal 112.</p>
                    <p>Ein Wert im Bereich von <strong>43-112 deutet auf eine hohe psychologische Flexibilität hin.</strong></p>
                    <p>Sie sind gut in der Lage, sich von unangenehmen Gedanken und Gefühlen nicht einschränken zu lassen und können auch unter schwierigen Umständen werteorientiert handeln. Dies ermöglicht Ihnen ein flexibles und effektives Reagieren auf Herausforderungen.</p>
                    <p>Ihre Fähigkeit zur Akzeptanz und zum werteorientierten Handeln ist eine wertvolle Ressource, die Sie weiterhin pflegen und nutzen können, um Ihre Lebensqualität zu optimieren.</p>
                `;
                chartData = [0, 0, totalScore];
            }

            resultTextDiv.innerHTML = resultInterpretation;
            quizSection.style.display = 'none';
            resultSection.style.display = 'block';

            renderChart(totalScore, chartLabels, chartData, chartColors);
            resultSection.scrollIntoView({ behavior: 'smooth' });
        }

        function renderChart(score, labels, data, colors) {
            const ctx = document.getElementById('resultChart').getContext('2d');
            if (myChartInstance) {
                myChartInstance.destroy();
            }
            myChartInstance = new Chart(ctx, {
                type: 'bar', // Change to bar chart for clear score representation
                data: {
                    labels: ['Ihr Ergebnis'],
                    datasets: [{
                        label: 'Psychologische Flexibilität (AAQ-Rev-16)',
                        data: [score],
                        backgroundColor: (ctx) => {
                            const value = ctx.parsed.y;
                            if (value <= 28) return colors[0];
                            if (value <= 42) return colors[1];
                            return colors[2];
                        },
                        borderColor: (ctx) => {
                            const value = ctx.parsed.y;
                            if (value <= 28) return colors[0];
                            if (value <= 42) return colors[1];
                            return colors[2];
                        },
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 112, // Max possible score
                            title: {
                                display: true,
                                text: 'Gesamtpunktwert'
                            }
                        },
                        x: {
                            grid: {
                                display: false
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: false
                        },
                        title: {
                            display: true,
                            text: 'Ihr Gesamtpunktwert im AAQ-Rev-16',
                            font: {
                                size: 16
                            }
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    let label = context.dataset.label || '';
                                    if (label) {
                                        label += ': ';
                                    }
                                    if (context.parsed.y !== null) {
                                        label += context.parsed.y + ' Punkte';
                                    }
                                    return label;
                                }
                            }
                        }
                    }
                }
            });
        }

        function restartTest() {
            if (myChartInstance) {
                myChartInstance.destroy();
                myChartInstance = null;
            }

            currentQuestionIndex = 0;
            userAnswers.fill(null);

            introSection.style.display = 'block';
            quizSection.style.display = 'none';
            resultSection.style.display = 'none';

            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Initialisiere den Test beim Laden der Seite
        document.addEventListener('DOMContentLoaded', () => {
            introSection.style.display = 'block';
            quizSection.style.display = 'none';
            resultSection.style.display = 'none';
        });
    </script>
</body>
</html>
