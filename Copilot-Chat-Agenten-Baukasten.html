<!doctype html>
<html lang="de">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Baukasten für Copilot‑Chat‑Agenten V5.2</title>

<style>
/* --- Styling wie V5.1 (unverändert), nur minimale Anpassungen erlaubt --- */

:root{
  --primary:#005A9C;
  --primary-600:#0a66a8;
  --accent:#2FB1C5;
  --bg:#f5f7fa;
  --card-bg:#ffffff;
  --subtle:#eef2f5;
  --muted:#4a5568;
  --text:#1a202c;
  --border:#e2e8f0;
  --shadow:0 4px 14px rgba(0,0,0,0.08);
  --radius:10px;
  --warning:#C05621;
  --success:#2F855A;
  --focus:#2FB1C5;

  --edit-bg:#E8F5E9;
  --edit-border:#81C784;
  --edit-focus:#43A047;

  --badge-bg:#E5E7EB;
  --badge-border:#D1D5DB;

  --container:1024px;
  --space-1:8px;
  --space-2:12px;
  --space-3:16px;
  --space-4:20px;
  --space-5:28px;
  --space-6:36px;
}

*{box-sizing:border-box}
html,body{margin:0;padding:0;background:var(--bg);color:var(--text);font:16px/1.55 system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif}
.container{max-width:var(--container);margin:0 auto;padding:24px;}
h1{font-size:28px;margin:0 0 var(--space-4);color:var(--primary);text-align:center}
h2{font-size:22px;margin:0 0 var(--space-3);color:var(--primary)}
h3{font-size:18px;margin:0 0 var(--space-2);color:var(--primary)}
p{margin:0 0 var(--space-3);color:var(--text)}
.card{
  background:var(--card-bg);
  border:1px solid var(--border);
  border-radius:var(--radius);
  box-shadow:var(--shadow);
  padding:var(--space-5);
  margin:0 0 var(--space-5);
}
.subcard{
  background:var(--subtle);
  border:1px solid var(--border);
  border-radius:8px;
  padding:16px;
  margin:var(--space-3) 0;
}
.btn{
  background:var(--primary);
  color:#fff;
  border:none;
  border-radius:999px;
  padding:12px 20px;
  font-weight:600;
  cursor:pointer;
  box-shadow:0 2px 6px rgba(0,0,0,0.1);
}
.btn:hover{background:var(--primary-600)}
.btn--sm{padding:8px 14px;font-size:14px}

select{
  width:100%;
  min-width:280px;
  padding:6px;
  border:1px solid var(--border);
  border-radius:8px;
  background:#fff;
  color:var(--text);
  font-size:14px;
}

.editable{
  display:inline-block;
  min-width:160px;
  min-height:1.4em;
  background:var(--edit-bg);
  border:1px dashed var(--edit-border);
  border-radius:6px;
  padding:2px 6px;
  line-height:1.6;
}
.editable:focus{outline:2px solid var(--edit-focus);background:#E3F2E5}

.badge-gray{
  display:inline-block;
  min-width:160px;
  min-height:1.4em;
  background:var(--badge-bg);
  border:1px solid var(--badge-border);
  border-radius:6px;
  padding:2px 6px;
  line-height:1.6;
}

.preview{
  margin-top:12px;
  padding:10px 12px;
  border:1px dashed var(--border);
  border-radius:8px;
  background:#fcfcfd;
}

.top-note{
  margin-bottom:var(--space-4);
  padding:12px 14px;
  border-left:4px solid var(--accent);
  background:#f3fafc;
  border-radius:6px;
}

.copy-area .title-line{font-weight:700;margin-bottom:8px}
.copy-msg{margin-top:10px;color:var(--success);display:none}

#builder{display:none}

.info-btn{
  background:#ffffff;
  color:var(--primary);
  border:1px solid var(--border);
  border-radius:999px;
  padding:8px 12px;
  font-weight:600;
  cursor:pointer;
  box-shadow:0 2px 6px rgba(0,0,0,0.06);
}
.info-btn:hover{background:#f7fafc}

.info-panel{
  margin-top:12px;
  padding:12px 14px;
  border:1px solid var(--border);
  border-radius:8px;
  background:#fff;
  box-shadow:var(--shadow);
  display:none;
}

.info-panel h4{margin:0 0 8px;font-size:16px;color:var(--primary)}

.close-info{
  background:transparent;
  color:var(--muted);
  border:1px solid var(--border);
  border-radius:999px;
  padding:6px 10px;
  cursor:pointer;
}
.close-info:hover{background:#f8fafc}

</style>
</head>

<body>

<section id="start" class="centered">
  <div class="card start-card">
    <div class="container">
      <h1>Baukasten für Copilot‑Chat‑Agenten</h1>
      <p>Dieser Baukasten unterstützt dich dabei, einen vollständig einsatzbereiten Copilot Chat Agenten zu erstellen.</p>

      <div class="top-note">
        <h3>Datenschutzhinweis</h3>
        <p>Der Baukasten speichert keine persönlichen Daten. Alle Eingaben bleiben lokal in deinem Browser.</p>
      </div>

      <button id="startBtn" class="btn">Start</button>
    </div>
  </div>
</section>

<section id="builder">
<div class="container">

<h1>Baukasten für Copilot‑Chat‑Agenten</h1>

<!-- ------------------------------------------------------------- -->
<!--   ROLLE / PERSONA (UNVERÄNDERT)                               -->
<!-- ------------------------------------------------------------- -->

<div class="card" id="mod-rolle">
<h2>Rolle / Persona</h2>
<div class="subcard">

<h3>Zuständigkeit</h3>
<p class="subhint">Wähle bis zu 3 Rollen:</p>

<select id="rolleSelect" multiple size="8">
<option>Ausbildungsunterstützung, Azubi</option>
<option>Support & Lernen</option>
<option>Führungskraft</option>
<option>Coach / Mentor</option>
<option>Gesundheit / Ernährung</option>
<option>Kommunikation / Training</option>
<option>Fachkraft Chemieproduktion</option>
<option>Fachkraft Technik</option>
<option>Fachkraft Wartung / Instandhaltung</option>
<option>Engineering</option>
<option>HSE / Arbeitssicherheit</option>
<option>Labor / QA</option>
<option>Prozess- & Verfahrensingenieur</option>
<option>Office / Administration</option>
<option>IT / Digital / Prozesse</option>
<option>Support & Service</option>
<option>Verwaltung, HR</option>
<option>Recht / Steuern</option>
<option>Finance</option>
<option>Einkauf / Verkauf, CSC</option>
</select>

<div class="preview"><p>Dein Wirkungsbereich ist <span id="rolleBadge" class="badge-gray"></span>.</p></div>
</div>
</div>

<!-- ------------------------------------------------------------- -->
<!--   PURPOSE (UNVERÄNDERT)                                      -->
<!-- ------------------------------------------------------------- -->

<div class="card" id="mod-purpose">
<h2>Ziel / Purpose</h2>

<div class="subcard">
<h3>Zweck</h3>
<p>Wähle bis zu 2 Zwecke:</p>

<select id="purposeSelect" multiple size="8">
<option>Situationen klären, Orientierung geben</option>
<option>Prozesse vereinfachen</option>
<option>Wissen vermitteln</option>
<option>Entscheidungen vorbereiten</option>
<option>Sicherheit erhöhen</option>
<option>Kommunikation verbessern</option>
<option>Verständnis steigern</option>
<option>Arbeitsalltag entlasten</option>
<option>Standardaufgaben beschleunigen</option>
<option>Informationen strukturieren</option>
<option>Komplexität reduzieren</option>
<option>Konsistenz sicherstellen</option>
<option>Risiken erkennen</option>
<option>Zusammenarbeit unterstützen</option>
<option>Lerninhalte aufbereiten</option>
</select>

<div class="preview">
<p>Dein übergeordneter Zweck ist es: <span id="purposeEditable" class="editable" contenteditable="true"></span></p>
</div>
</div>
</div>

<!-- ------------------------------------------------------------- -->
<!--   TASKS (UNVERÄNDERT)                                        -->
<!-- ------------------------------------------------------------- -->

<div class="card" id="mod-tasks">
<h2>Auftrag / Task</h2>

<div class="subcard">
<h3>Tätigkeiten</h3>
<p>Wähle bis zu 3 Tätigkeiten:</p>

<select id="tasksSelect" multiple size="8">
<option>Inhalte erklären</option>
<option>Inhalte zusammenfassen</option>
<option>Informationen analysieren</option>
<option>Informationen strukturieren</option>
<option>Prozesse darstellen</option>
<option>Anleitungen formulieren</option>
<option>Entscheidungsgrundlagen vorbereiten</option>
<option>Fragen beantworten</option>
<option>Hinweise oder Risiken aufzeigen</option>
<option>Daten oder Dokumente auslesen</option>
<option>Lerninhalte aufbereiten</option>
<option>Texte erstellen</option>
<option>Texte überarbeiten</option>
</select>

<div class="preview">
<p>Dein Auftrag umfasst folgende Tätigkeiten: <span id="tasksEditable" class="editable" contenteditable="true"></span></p>
</div>
</div>
</div>

<!-- ------------------------------------------------------------- -->
<!--   *** NEUER GRUNDVERHALTEN‑BLOCK (V5.2) ***                   -->
<!-- ------------------------------------------------------------- -->

<div class="card" id="mod-grundverhalten">
<h2><strong>Grundverhalten / Arbeitslogik</strong></h2>

<!-- ------------------------ STARTVERHALTEN ---------------------- -->

<div class="subcard" id="sub-start">
<h3>Startverhalten</h3>
<p>Wähle bis zu 3 Optionen:</p>

<select id="startSelect" multiple size="8">
<option>direkter Start</option>
<option>kurzer Impuls</option>
<option>kurze Einordnung</option>
<option>Überblick am Anfang</option>
<option>freundlicher Einstieg</option>
<option>sachlich‑klarer Einstieg</option>
<option>ruhiger/klarer Einstieg</option>
<option>kurze Zusammenfassung des Inputs</option>
</select>

<div class="preview">
<p>Startverhalten: <span id="startEditable" class="editable" contenteditable="true"></span></p>
</div>
</div>

<!-- ---------------------- VARIATION / AUSDRUCK ---------------- -->

<div class="subcard" id="sub-var">
<h3>Variation / Ausdruck</h3>
<p>Wähle bis zu 3 Optionen:</p>

<select id="varSelect" multiple size="8">
<option>Einstiegsformulierungen leicht variieren</option>
<option>Satzbau leicht variieren</option>
<option>Wortwahl dezent variieren</option>
<option>Abschlussformulierungen variieren</option>
<option>Antwortlänge leicht variieren</option>
<option>natürlichere Tonalität</option>
</select>

<div class="preview">
<p>Variation: <span id="varEditable" class="editable" contenteditable="true"></span></p>
</div>
</div>

<!-- ----------------------- ANTWORTSTIL -------------------------- -->

<div class="subcard" id="sub-antwortstil">
<h3>Antwortstil / Spezifität</h3>
<p>Wähle genau eine Option:</p>

<select id="tiefeSelect" size="8">
<option>kompakt & direkt</option>
<option>schrittweise/strukturiert</option>
<option>technisch präzise</option>
<option>praxisnah mit Beispielen</option>
<option>ausführlich erklärend</option>
<option>tabellarische Darstellung</option>
<option>Pro/Contra‑Struktur</option>
<option>klare Handlungsempfehlungen</option>
</select>

<div class="preview">
<p>Antwortstil: <span id="tiefeEditable" class="editable" contenteditable="true"></span></p>
</div>
</div>

<!-- ----------------------- RÜCKFRAGENLOGIK ---------------------- -->

<div class="subcard" id="sub-rq">
<h3>Rückfragen‑Logik</h3>
<p>Wähle genau eine Option:</p>

<select id="rqSelect" size="8">
<option>keine Rückfragen</option>
<option>Rückfragen nur bei Unklarheit (max. 1)</option>
<option>Zielbild klären (1 Frage)</option>
<option>Kontext klären (1 Frage)</option>
<option>Rückfrage am Ende</option>
<option>Scope‑Frage bei Mehrdeutigkeit</option>
<option>optionale Bestätigungsfrage („Soll ich weiter ins Detail gehen?“)</option>
</select>

<div class="preview">
<p>Rückfragen‑Logik: <span id="rqEditable" class="editable" contenteditable="true"></span></p>
</div>
</div>

<!-- ----------------------- RECHERCHE ---------------------------- -->

<div class="subcard" id="sub-recherche">
<h3>Recherche & Quellen</h3>
<p>Wähle genau eine Option:</p>

<select id="recSelect" size="8">
<option>keine Websuche</option>
<option>Websuche bei Bedarf</option>
<option>Websuche mit Quellenangabe</option>
<option>nur externe Themen recherchieren</option>
<option>externe Infos als Stichpunkte</option>
<option>vor Recherche 1 Rückfrage bei Unklarheit</option>
<option>Recherche präzise, keine Vermutungen</option>
</select>

<div class="preview">
<p>Recherche: <span id="recEditable" class="editable" contenteditable="true"></span></p>
</div>
</div>
</div>

<!-- ------------------------------------------------------------- -->
<!--   COMMUNICATION STYLE (UNVERÄNDERT)                           -->
<!-- ------------------------------------------------------------- -->

<div class="card" id="mod-stil">
<h2>Kommunikationsstil</h2>

<div class="subcard">
<h3>Stil</h3>
<p>Wähle genau eine Option:</p>

<select id="stilSelect" size="8">
<option>analytisch-technisch</option>
<option>pragmatisch und lösungsorientiert</option>
<option>strukturiert und präzise</option>
<option>ruhig und klar</option>
<option>formell und professionell</option>
<option>motivierend, coachend</option>
<option>warm und menschlich</option>
<option>freundlich und unterstützend</option>
<option>neutral-sachlich</option>
<option>leicht ironisch, respektvoll</option>
<option>direkt und kompakt</option>
<option>didaktisch, erklärend</option>
<option>kollegial</option>
<option>diplomatisch und wertschätzend</option>
</select>

<div class="preview">
<p>Kommunikationsstil: <span id="stilEditable" class="editable" contenteditable="true"></span></p>
</div>
</div>
</div>

<!-- ------------------------------------------------------------- -->
<!--   COPY SCRIPT                                                 -->
<!-- ------------------------------------------------------------- -->

<div class="card copy-area" id="copyArea">
<div class="title-line">Das Agent‑Script kann nun gespeichert werden</div>
<button class="btn" id="copyBtn">Kopieren</button>
<div class="copy-msg" id="copyMsg">Kopiert!</div>
<pre class="output" id="scriptOutput"></pre>
</div>

<!-- ------------------------------------------------------------- -->
<!-- FEST VERANKERTE BLÖCKE (UNVERÄNDERT)                          -->
<!-- ------------------------------------------------------------- -->

<!-- Diese Blöcke werden direkt im JS in das Script eingefügt. -->

</div>
</section>

<script>

/* ============================================================= */
/*       STATE                                                   */
/* ============================================================= */

const state = {
  rolle:{selected:[],limit:3,edited:false},
  purpose:{selected:[],limit:2,edited:false},
  tasks:{selected:[],limit:3,edited:false},

  start:{selected:[],limit:3,edited:false},
  variation:{selected:[],limit:3,edited:false},
  tiefe:{selected:'',edited:false},
  rq:{selected:'',edited:false},
  recherche:{selected:'',edited:false},

  stil:{selected:'',edited:false}
};

const qs = (s,r=document)=>r.querySelector(s);
const joinList = arr => arr.join(', ');
const textOrEmpty = sel => (qs(sel)?.textContent || '').trim();

/* ============================================================= */
/* MULTISELECT HANDLING                                          */
/* ============================================================= */

function enableClickToggle(selectEl, key){
  selectEl.addEventListener('mousedown', e=>{
    const opt = e.target;
    if(opt.tagName === 'OPTION'){
      e.preventDefault();
      opt.selected = !opt.selected;
      selectEl.dispatchEvent(new Event('change',{bubbles:true}));
    }
  });
}

function enforceMultiLimit(selectEl, key){
  const limit = state[key].limit;
  const current = [...selectEl.options].filter(o=>o.selected).map(o=>o.text);

  const prev = state[key].selected.slice();
  const kept = prev.filter(x=>current.includes(x));
  const added = current.filter(x=>!prev.includes(x));
  const merged = kept.concat(added);

  if(merged.length > limit){
    const toDeselect = merged.slice(limit);
    [...selectEl.options].forEach(o=>{
      if(toDeselect.includes(o.text)) o.selected=false;
    });
    state[key].selected = merged.slice(0,limit);
  } else {
    state[key].selected = merged;
  }

  [...selectEl.options].forEach(o=>{
    if(!o.selected) o.disabled = state[key].selected.length >= limit;
  });

  if(!state[key].edited){
    const val = joinList(state[key].selected);
    const span = {
      start:'#startEditable',
      variation:'#varEditable',
      tasks:'#tasksEditable',
      purpose:'#purposeEditable'
    }[key];
    if(span) qs(span).textContent = val;
  }
}

/* ============================================================= */
/* SINGLE SELECT                                                 */
/* ============================================================= */

function updateSingle(selectEl, key){
  const val = selectEl.value || '';
  state[key].selected = val;
  if(!state[key].edited){
    const spanId = {
      tiefe:'#tiefeEditable',
      rq:'#rqEditable',
      recherche:'#recEditable',
      stil:'#stilEditable'
    }[key];
    if(spanId) qs(spanId).textContent = val;
  }
}

/* ============================================================= */
/* BUILD SCRIPT                                                  */
/* ============================================================= */

function buildScript(){

  const role = joinList(state.rolle.selected);
  const purpose = textOrEmpty('#purposeEditable');
  const tasks = textOrEmpty('#tasksEditable');

  const start = textOrEmpty('#startEditable');
  const variation = textOrEmpty('#varEditable');
  const tiefe = textOrEmpty('#tiefeEditable');
  const rq = textOrEmpty('#rqEditable');
  const rec = textOrEmpty('#recEditable');
  const stil = textOrEmpty('#stilEditable');

  const parts = [];

  if(role){
    parts.push(`[Rolle / Persona]
Dein Wirkungsbereich ist ${role}. Du agierst als professioneller, menschlicher Begleiter für diesen Kontext.`);
  }

  if(purpose){
    parts.push(`[Ziel / Purpose]
Dein übergeordneter Zweck ist es, ${purpose}. Du orientierst deine gesamte Arbeitsweise an diesem Ziel.`);
  }

  if(tasks){
    parts.push(`[Auftrag / Task]
Dein Auftrag umfasst folgende Tätigkeiten: ${tasks}. Du führst diese Aufgaben verlässlich, klar strukturiert und nutzerorientiert aus.`);
  }

  /* --- Neuer Grundverhalten‑Block V5.2 --- */

  const grund = [];

  if(start){
    grund.push(`Für den Einstieg nutzt du ${start}, situativ passend und ohne wiederholende Muster.`);
  }
  if(variation){
    grund.push(`Du variierst deinen Ausdruck dezent durch ${variation}, damit Antworten natürlich und nicht repetitiv wirken.`);
  }
  if(tiefe){
    grund.push(`Deine Antworten folgen dem Stil ${tiefe}, damit Inhalte klar, nachvollziehbar und strukturiert bleiben.`);
  }
  if(rq){
    grund.push(`Deine Rückfragenlogik lautet: ${rq}.`);
  }
  if(rec){
    grund.push(`Dein Recherche‑ und Quellenverhalten ist: ${rec}.`);
  }

  if(grund.length){
    parts.push(`[Grundverhalten / Arbeitslogik]
${grund.join('\n\n')}`);
  }

  if(stil){
    parts.push(`[Kommunikationsstil]
Dein Kommunikationsstil ist: ${stil}. Du hältst diesen Stil in Tonfall, Struktur und Wortwahl konsistent ein.`);
  }

  /* --- FIXED BLOCKS (unchanged) --- */

  parts.push(`[Formatoption (situativ nachgelagert)]
Biete nach der ersten Antwort optional an, das Ergebnis in einem gewünschten Format darzustellen (z. B. Schritte, Varianten, Pro/Contra, Formulierungen). Frag nur bei erkennbarem Strukturbedarf; sonst entscheide situativ.`);

  parts.push(`[Compliance DSGVO]
Du hältst dich jederzeit an Datenschutz, Vertraulichkeit, Sicherheit und professionelle Grenzen. Nie Diagnosen erfragen; nur arbeitsrelevante Einschränkungen klären.`);

  parts.push(`[Grenzen]
Keine Diagnosen oder medizinischen Aussagen; keine psychologischen Interpretationen; keine Rechtsberatung. Keine Beratung zu Kindern, Familie oder privaten Ursachen.
Bei privaten Belastungen: freundlich bleiben, Rolle klären, beruflichen Rahmen sortieren (Prioritäten, Ruhe, Arbeitsfähigkeit).
Bei gesundheitlichen Belastungen, auffälligen Fehlzeiten, eskalierten Konflikten oder Themen außerhalb deiner Rolle: Hinweise geben, dass HR/BGM/Betriebsrat eingebunden werden sollte. Immer sachlich, respektvoll, neutral, ohne persönliche Abwertungen.`);

  parts.push(`[Out-of-Scope]
Du kommunizierst klar, wenn eine Anfrage außerhalb des Zuständigkeitsbereiches liegt, und bietest dann sichere, fachlich passende Alternativen an.`);

  parts.push(`[Universelle Fehler- & Klarheitslogik]
Wenn Informationen fehlen, unklar oder widersprüchlich sind, frage einmal präzise nach, triff keine Annahmen und arbeite nicht mit Vermutungen. Bleibe faktentreu, biete bei Bedarf Optionen an und mach transparent, wenn du ohne Klärung nicht sinnvoll weitermachen kannst.`);

  parts.push(`[Konsistenz- & Lückenmanagement]
Prüfe Nutzerangaben auf Konsistenz, vermeide Endlos-Schleifen (max. eine Nachfrage) und halte Grenzen klar fest: Sag offen, wenn dir verlässliche Infos fehlen oder der Auftrag außerhalb deines Handlungsspielraums liegt.`);

  parts.push(`[Kommunikatives Eskalationsmodell]
Arbeite in vier Schritten:
(1) kurze offene Klärung,
(2) Konkretisierung mit Fokus,
(3) Konsequenz nach zwei unklaren Antworten („Ich kann ohne Klärung nicht weiterhelfen.“),
(4) Hinweis, dass das Thema ggf. einer formalen Prüfung durch zuständige Stellen bedarf.`);

  parts.push(`[Transparenzpflicht]
Sag früh und klar, welche Information du brauchst, um eine qualifizierte Antwort zu geben.`);

  parts.push(`[Werte & Unternehmensbezug]
Werte: Sicherheit, Qualität, respektvolles Verhalten, Herausforderung, Gewinnen. Werte nur nennen, wenn sie Orientierung geben („…damit wir Qualität/Sicherheit sichern.“).
Trade-offs benennen; Sicherheit und Respekt priorisieren. Orientierung: mutig, klar, lösungsorientiert, ohne Drama.`);

  return parts.join('\n\n');
}

/* ============================================================= */
/* EVENT WIRING                                                  */
/* ============================================================= */

window.addEventListener('DOMContentLoaded', ()=>{

  qs('#startBtn').addEventListener('click', ()=>{
    qs('#start').style.display='none';
    qs('#builder').style.display='block';
  });

  /* MULTISELECT */
  [
    {sel:'#rolleSelect',key:'rolle'},
    {sel:'#purposeSelect',key:'purpose'},
    {sel:'#tasksSelect',key:'tasks'},
    {sel:'#startSelect',key:'start'},
    {sel:'#varSelect',key:'variation'}
  ].forEach(d=>{
    const el = qs(d.sel);
    enableClickToggle(el,d.key);
    el.addEventListener('change',e=>enforceMultiLimit(e.target,d.key));
  });

  /* SINGLESELECT */
  qs('#tiefeSelect').addEventListener('change',e=>updateSingle(e.target,'tiefe'));
  qs('#rqSelect').addEventListener('change',e=>updateSingle(e.target,'rq'));
  qs('#recSelect').addEventListener('change',e=>updateSingle(e.target,'recherche'));
  qs('#stilSelect').addEventListener('change',e=>updateSingle(e.target,'stil'));

  /* EDIT FLAGS */
  ['#purposeEditable','#tasksEditable','#startEditable','#varEditable','#tiefeEditable','#rqEditable','#recEditable','#stilEditable']
  .forEach(sel=>{
    const el = qs(sel);
    el.addEventListener('input',()=>{ 
      const key = ({
        '#purposeEditable':'purpose',
        '#tasksEditable':'tasks',
        '#startEditable':'start',
        '#varEditable':'variation',
        '#tiefeEditable':'tiefe',
        '#rqEditable':'rq',
        '#recEditable':'recherche',
        '#stilEditable':'stil'
      })[sel];
      state[key].edited=true;
    });
  });

  /* COPY */
  qs('#copyBtn').addEventListener('click', async ()=>{
    const script = buildScript();
    try{
      await navigator.clipboard.writeText(script);
      qs('#scriptOutput').textContent = script;
      const msg = qs('#copyMsg');
      msg.style.display='block';
      setTimeout(()=>msg.style.display='none',3000);
    }catch{
      alert("Kopieren nicht möglich");
    }
  });

});
</script>

</body>
</html>
